<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>editor</title>
    <link href="./css/styles.css" rel="stylesheet">
    <script type="module">
        const urlPrams = new URLSearchParams(window.location.search);
        const wRate = urlPrams.get('wRate');
        const hRate = urlPrams.get('hRate');
        const from = urlPrams.get('from');
        console.log(wRate, hRate);
        import "./bundle.js"

        globalThis.from = from;
        globalThis.editor = new KPS.Editor('editor', {width: wRate, height: hRate});
    </script>
    <script>
        function save() {
            const parentWindow = window.opener;
            parentWindow.postMessage({source: 'graphical-editor', from: globalThis.from, base64: globalThis.editor.save()}, window.location.origin);
            window.close();
        }
    </script>
</head>
<body>
  <div className="flex">
    <div id="editor"></div>
    <div class="m-5">
        <button class="px-4 py-2 font-semibold text-sm bg-white text-slate-700 border border-slate-300
            rounded-md shadow-sm dark:bg-slate-700
            dark:text-slate-200 dark:border-transparent"
            onclick="save()"
        >
          save
        </button>
    </div>
  </div>
</body>
</html>