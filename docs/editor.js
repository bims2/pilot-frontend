(()=>{"use strict";var t={907:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(601),i=n.n(o),r=n(314),s=n.n(r)()(i());s.push([t.id,"/*\n! tailwindcss v3.4.4 | MIT License | https://tailwindcss.com\n*/\n\n/*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box;\n  /* 1 */\n  border-width: 0;\n  /* 2 */\n  border-style: solid;\n  /* 2 */\n  border-color: #e5e7eb;\n  /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5;\n  /* 1 */\n  -webkit-text-size-adjust: 100%;\n  /* 2 */\n  -moz-tab-size: 4;\n  /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4;\n  /* 3 */\n  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\";\n  /* 4 */\n  font-feature-settings: normal;\n  /* 5 */\n  font-variation-settings: normal;\n  /* 6 */\n  -webkit-tap-highlight-color: transparent;\n  /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0;\n  /* 1 */\n  line-height: inherit;\n  /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0;\n  /* 1 */\n  color: inherit;\n  /* 2 */\n  border-top-width: 1px;\n  /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n  /* 1 */\n  font-feature-settings: normal;\n  /* 2 */\n  font-variation-settings: normal;\n  /* 3 */\n  font-size: 1em;\n  /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0;\n  /* 1 */\n  border-color: inherit;\n  /* 2 */\n  border-collapse: collapse;\n  /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit;\n  /* 1 */\n  font-feature-settings: inherit;\n  /* 1 */\n  font-variation-settings: inherit;\n  /* 1 */\n  font-size: 100%;\n  /* 1 */\n  font-weight: inherit;\n  /* 1 */\n  line-height: inherit;\n  /* 1 */\n  letter-spacing: inherit;\n  /* 1 */\n  color: inherit;\n  /* 1 */\n  margin: 0;\n  /* 2 */\n  padding: 0;\n  /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button;\n  /* 1 */\n  background-color: transparent;\n  /* 2 */\n  background-image: none;\n  /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield;\n  /* 1 */\n  outline-offset: -2px;\n  /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button;\n  /* 1 */\n  font: inherit;\n  /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\n\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1;\n  /* 1 */\n  color: #9ca3af;\n  /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1;\n  /* 1 */\n  color: #9ca3af;\n  /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block;\n  /* 1 */\n  vertical-align: middle;\n  /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgba(59, 130, 246, 0.5);\n  --tw-ring-offset-shadow: 0 0 rgba(0,0,0,0);\n  --tw-ring-shadow: 0 0 rgba(0,0,0,0);\n  --tw-shadow: 0 0 rgba(0,0,0,0);\n  --tw-shadow-colored: 0 0 rgba(0,0,0,0);\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgba(59, 130, 246, 0.5);\n  --tw-ring-offset-shadow: 0 0 rgba(0,0,0,0);\n  --tw-ring-shadow: 0 0 rgba(0,0,0,0);\n  --tw-shadow: 0 0 rgba(0,0,0,0);\n  --tw-shadow-colored: 0 0 rgba(0,0,0,0);\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n.pointer-events-auto {\n  pointer-events: auto;\n}\n\n.static {\n  position: static;\n}\n\n.fixed {\n  position: fixed;\n}\n\n.absolute {\n  position: absolute;\n}\n\n.relative {\n  position: relative;\n}\n\n.bottom-0 {\n  bottom: 0px;\n}\n\n.right-0 {\n  right: 0px;\n}\n\n.col-span-2 {\n  grid-column: span 2 / span 2;\n}\n\n.col-span-3 {\n  grid-column: span 3 / span 3;\n}\n\n.row-span-1 {\n  grid-row: span 1 / span 1;\n}\n\n.row-span-10 {\n  grid-row: span 10 / span 10;\n}\n\n.m-2 {\n  margin: 0.5rem;\n}\n\n.m-3 {\n  margin: 0.75rem;\n}\n\n.m-5 {\n  margin: 1.25rem;\n}\n\n.-mx-1 {\n  margin-left: -0.25rem;\n  margin-right: -0.25rem;\n}\n\n.-mx-1\\.5 {\n  margin-left: -0.375rem;\n  margin-right: -0.375rem;\n}\n\n.mx-auto {\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.my-1 {\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n}\n\n.my-1\\.5 {\n  margin-top: 0.375rem;\n  margin-bottom: 0.375rem;\n}\n\n.mb-1 {\n  margin-bottom: 0.25rem;\n}\n\n.ml-1 {\n  margin-left: 0.25rem;\n}\n\n.ml-2 {\n  margin-left: 0.5rem;\n}\n\n.mr-1 {\n  margin-right: 0.25rem;\n}\n\n.mr-2 {\n  margin-right: 0.5rem;\n}\n\n.mt-1 {\n  margin-top: 0.25rem;\n}\n\n.mt-2 {\n  margin-top: 0.5rem;\n}\n\n.flex {\n  display: flex;\n}\n\n.inline-flex {\n  display: inline-flex;\n}\n\n.grid {\n  display: grid;\n}\n\n.hidden {\n  display: none;\n}\n\n.aspect-square {\n  aspect-ratio: 1 / 1;\n}\n\n.h-3 {\n  height: 0.75rem;\n}\n\n.h-5 {\n  height: 1.25rem;\n}\n\n.h-6 {\n  height: 1.5rem;\n}\n\n.h-8 {\n  height: 2rem;\n}\n\n.h-full {\n  height: 100%;\n}\n\n.h-px {\n  height: 1px;\n}\n\n.min-h-72 {\n  min-height: 18rem;\n}\n\n.w-10 {\n  width: 2.5rem;\n}\n\n.w-2 {\n  width: 0.5rem;\n}\n\n.w-20 {\n  width: 5rem;\n}\n\n.w-52 {\n  width: 13rem;\n}\n\n.w-6 {\n  width: 1.5rem;\n}\n\n.w-8 {\n  width: 2rem;\n}\n\n.w-\\[1px\\] {\n  width: 1px;\n}\n\n.w-full {\n  width: 100%;\n}\n\n.max-w-2xl {\n  max-width: 42rem;\n}\n\n.flex-1 {\n  flex: 1 1 0%;\n}\n\n.shrink-0 {\n  flex-shrink: 0;\n}\n\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n\n.cursor-default {\n  cursor: default;\n}\n\n.select-none {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n}\n\n.resize {\n  resize: both;\n}\n\n.grid-cols-1 {\n  grid-template-columns: repeat(1, minmax(0, 1fr));\n}\n\n.grid-cols-5 {\n  grid-template-columns: repeat(5, minmax(0, 1fr));\n}\n\n.grid-rows-12 {\n  grid-template-rows: repeat(12, minmax(0, 1fr));\n}\n\n.grid-rows-3 {\n  grid-template-rows: repeat(3, minmax(0, 1fr));\n}\n\n.items-center {\n  align-items: center;\n}\n\n.justify-center {\n  justify-content: center;\n}\n\n.gap-0 {\n  gap: 0px;\n}\n\n.gap-0\\.5 {\n  gap: 0.125rem;\n}\n\n.overflow-hidden {\n  overflow: hidden;\n}\n\n.rounded {\n  border-radius: 0.25rem;\n}\n\n.rounded-full {\n  border-radius: 9999px;\n}\n\n.rounded-md {\n  border-radius: 0.375rem;\n}\n\n.rounded-xl {\n  border-radius: 0.75rem;\n}\n\n.border {\n  border-width: 1px;\n}\n\n.border-b {\n  border-bottom-width: 1px;\n}\n\n.border-r {\n  border-right-width: 1px;\n}\n\n.border-black {\n  --tw-border-opacity: 1;\n  border-color: rgba(0, 0, 0, 1);\n  border-color: rgba(0, 0, 0, var(--tw-border-opacity));\n}\n\n.border-gray-300 {\n  --tw-border-opacity: 1;\n  border-color: rgba(209, 213, 219, 1);\n  border-color: rgba(209, 213, 219, var(--tw-border-opacity));\n}\n\n.border-slate-200 {\n  --tw-border-opacity: 1;\n  border-color: rgba(226, 232, 240, 1);\n  border-color: rgba(226, 232, 240, var(--tw-border-opacity));\n}\n\n.border-slate-300 {\n  --tw-border-opacity: 1;\n  border-color: rgba(203, 213, 225, 1);\n  border-color: rgba(203, 213, 225, var(--tw-border-opacity));\n}\n\n.bg-blue-500 {\n  --tw-bg-opacity: 1;\n  background-color: rgba(59, 130, 246, 1);\n  background-color: rgba(59, 130, 246, var(--tw-bg-opacity));\n}\n\n.bg-emerald-500 {\n  --tw-bg-opacity: 1;\n  background-color: rgba(16, 185, 129, 1);\n  background-color: rgba(16, 185, 129, var(--tw-bg-opacity));\n}\n\n.bg-gray-200 {\n  --tw-bg-opacity: 1;\n  background-color: rgba(229, 231, 235, 1);\n  background-color: rgba(229, 231, 235, var(--tw-bg-opacity));\n}\n\n.bg-slate-100 {\n  --tw-bg-opacity: 1;\n  background-color: rgba(241, 245, 249, 1);\n  background-color: rgba(241, 245, 249, var(--tw-bg-opacity));\n}\n\n.bg-slate-200 {\n  --tw-bg-opacity: 1;\n  background-color: rgba(226, 232, 240, 1);\n  background-color: rgba(226, 232, 240, var(--tw-bg-opacity));\n}\n\n.bg-slate-300 {\n  --tw-bg-opacity: 1;\n  background-color: rgba(203, 213, 225, 1);\n  background-color: rgba(203, 213, 225, var(--tw-bg-opacity));\n}\n\n.bg-slate-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgba(248, 250, 252, 1);\n  background-color: rgba(248, 250, 252, var(--tw-bg-opacity));\n}\n\n.bg-transparent {\n  background-color: transparent;\n}\n\n.bg-white {\n  --tw-bg-opacity: 1;\n  background-color: rgba(255, 255, 255, 1);\n  background-color: rgba(255, 255, 255, var(--tw-bg-opacity));\n}\n\n.p-0 {\n  padding: 0px;\n}\n\n.p-0\\.5 {\n  padding: 0.125rem;\n}\n\n.p-1 {\n  padding: 0.25rem;\n}\n\n.p-1\\.5 {\n  padding: 0.375rem;\n}\n\n.p-2 {\n  padding: 0.5rem;\n}\n\n.p-4 {\n  padding: 1rem;\n}\n\n.px-2 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\n\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n\n.py-1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n\n.py-1\\.5 {\n  padding-top: 0.375rem;\n  padding-bottom: 0.375rem;\n}\n\n.py-2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n\n.pb-0 {\n  padding-bottom: 0px;\n}\n\n.pb-0\\.5 {\n  padding-bottom: 0.125rem;\n}\n\n.pl-1 {\n  padding-left: 0.25rem;\n}\n\n.pl-2 {\n  padding-left: 0.5rem;\n}\n\n.pl-3 {\n  padding-left: 0.75rem;\n}\n\n.pr-1 {\n  padding-right: 0.25rem;\n}\n\n.pr-6 {\n  padding-right: 1.5rem;\n}\n\n.pt-0 {\n  padding-top: 0px;\n}\n\n.pt-0\\.5 {\n  padding-top: 0.125rem;\n}\n\n.text-center {\n  text-align: center;\n}\n\n.text-right {\n  text-align: right;\n}\n\n.text-\\[8px\\] {\n  font-size: 8px;\n}\n\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n\n.text-xs {\n  font-size: 0.75rem;\n  line-height: 1rem;\n}\n\n.font-bold {\n  font-weight: 700;\n}\n\n.font-semibold {\n  font-weight: 600;\n}\n\n.text-gray-500 {\n  --tw-text-opacity: 1;\n  color: rgba(107, 114, 128, 1);\n  color: rgba(107, 114, 128, var(--tw-text-opacity));\n}\n\n.text-slate-700 {\n  --tw-text-opacity: 1;\n  color: rgba(51, 65, 85, 1);\n  color: rgba(51, 65, 85, var(--tw-text-opacity));\n}\n\n.text-white {\n  --tw-text-opacity: 1;\n  color: rgba(255, 255, 255, 1);\n  color: rgba(255, 255, 255, var(--tw-text-opacity));\n}\n\n.opacity-40 {\n  opacity: 0.4;\n}\n\n.shadow-sm {\n  --tw-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  --tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);\n  box-shadow: 0 0 rgba(0,0,0,0), 0 0 rgba(0,0,0,0), 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 rgba(0,0,0,0)), var(--tw-ring-shadow, 0 0 rgba(0,0,0,0)), var(--tw-shadow);\n}\n\n.outline-none {\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n\n.outline-0 {\n  outline-width: 0px;\n}\n\n.drop-shadow-md {\n  --tw-drop-shadow: drop-shadow(0 4px 3px rgba(0, 0, 0, 0.07)) drop-shadow(0 2px 2px rgba(0, 0, 0, 0.06));\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) drop-shadow(0 4px 3px rgba(0, 0, 0, 0.07)) drop-shadow(0 2px 2px rgba(0, 0, 0, 0.06));\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.hover\\:bg-slate-200:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgba(226, 232, 240, 1);\n  background-color: rgba(226, 232, 240, var(--tw-bg-opacity));\n}\n\n.hover\\:bg-slate-300:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgba(203, 213, 225, 1);\n  background-color: rgba(203, 213, 225, var(--tw-bg-opacity));\n}\n\n.focus\\:border-transparent:focus {\n  border-color: transparent;\n}\n\n@media (prefers-color-scheme: dark) {\n  .dark\\:border-transparent {\n    border-color: transparent;\n  }\n\n  .dark\\:bg-gray-300 {\n    --tw-bg-opacity: 1;\n    background-color: rgba(209, 213, 219, 1);\n    background-color: rgba(209, 213, 219, var(--tw-bg-opacity));\n  }\n\n  .dark\\:bg-slate-700 {\n    --tw-bg-opacity: 1;\n    background-color: rgba(51, 65, 85, 1);\n    background-color: rgba(51, 65, 85, var(--tw-bg-opacity));\n  }\n\n  .dark\\:text-slate-200 {\n    --tw-text-opacity: 1;\n    color: rgba(226, 232, 240, 1);\n    color: rgba(226, 232, 240, var(--tw-text-opacity));\n  }\n}",""]);const a=s},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,i,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var d=0;d<t.length;d++){var c=[].concat(t[d]);o&&s[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var r={},s=[],a=0;a<t.length;a++){var l=t[a],d=o.base?l[0]+o.base:l[0],c=r[d]||0,h="".concat(d," ").concat(c);r[d]=c+1;var p=n(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var g=i(u,o);o.byIndex=a,e.splice(a,0,{identifier:h,updater:g,references:1})}s.push(h)}return s}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var r=o(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=n(r[s]);e[a].references--}for(var l=o(t,i),d=0;d<r.length;d++){var c=n(r[d]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=l}}},659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,i&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={id:o,exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0;var o={};n.r(o),n.d(o,{Editor:()=>Pe});class i{constructor(t){this._editor=t,this._down=!1,this._dragPoint={x:0,y:0},this._downPoint={x:0,y:0},this._point={x:0,y:0},this._originPoint={x:0,y:0},this._curPoint={x:0,y:0},this._originEvent=null,this._clientPoint={x:0,y:0},this._keyPressed={}}get keyPressed(){return this._keyPressed}get editor(){return this._editor}get down(){return this._down}set down(t){this._down=t}get dragPoint(){return this._dragPoint}set dragPoint(t){this._dragPoint=t}get downPoint(){return this._downPoint}set downPoint(t){this._downPoint.x=t.x,this._downPoint.y=t.y}get point(){return this._point}set point(t){this._point=t.x,this._point=t.y}get originPoint(){return this._originPoint}set originPoint(t){this._originPoint=t}get curPoint(){return this._curPoint}set curPoint(t){this._curPoint=t}get originEvent(){return this._originEvent}set originEvent(t){return this._originEvent=t}get clientPoint(){return this._clientPoint}}const r="none",s="snap",a="drag_page",l="page_zoom",d="create_line",c="create_rect",h="create)triangle",p="create_circle",u="create_image",g="create_label",y="select";class m{get type(){return r}onDoubleClick(t){}onMouseDown(t){}onMouseMove(t){}onMouseUp(t){}onMouseWheel(t){}onKeyDown(t){}onKeyUp(t){}}class b extends m{constructor(){super()}get type(){return s}onMouseDown(t){t.down=!0,t.downPoint.x=t.point.x,t.downPoint.y=t.point.y,t.dragPoint.x=t.point.x,t.dragPoint.y=t.point.y,this.#t(t)}onMouseMove(t){this.#t(t);t.editor.page.coordinate.curPoint={x:t.originEvent.offsetX,y:t.originEvent.offsetY}}onMouseUp(t){t.down=!1,this.#t(t)}onMouseWheel(t){}onKeyDown(t){}onKeyUp(t){}#t(t){const e=t.editor.page.coordinate,n=e.dpr,o=t.point,i=t.originPoint;i.x=t.originEvent.offsetX,i.y=t.originEvent.offsetY,o.x=i.x/n,o.y=i.y/n;const r=e.orgPoint.x/n,s=e.orgPoint.y/n,a=-e.wayPoint.x-r,l=-e.wayPoint.y-s;o.x+=a,o.y+=l,t._clientPoint.x=t.originEvent.clientX,t._clientPoint.y=t.originEvent.clientY}}class x extends m{constructor(){super()}onKeyDown(t){if(!t.editor._enabledShortcut)return;const e=t.editor.tools,n=t.originEvent.key;if(this.#e(t))switch(n){case"q":e.createLine(t.point);break;case"w":e.createRect(t.point);break;case"e":e.createTriangle(t.point);break;case"r":e.createCircle(t.point);break;case"t":e.createImage();break;case"a":e.createLabel(t.point);break;case"Escape":e.clear();break;case"z":e.undo();break;case"y":e.redo();break;case"Backspace":e.removeControl();break;case"[":e.frontControl();break;case"]":e.backControl()}}#e(t){const e=t.editor.tools;if(!t.originEvent.metaKey&&!t.originEvent.ctrlKey)return!0;switch(t.originEvent.key){case"c":e.copyControl();break;case"v":e.pasteControl();break;case"s":t.originEvent.preventDefault(),e.capture();break;case"[":e.veryFrontControl();break;case"]":e.veryBackControl();break;case"5":t.editor.page.viewControlOrder=!t.editor.page.viewControlOrder,t.editor.render();break;default:return!0}return!1}onKeyUp(t){}}class w extends m{constructor(){super(),this.handlers=[],this.handlers.push(new b),this.handlers.push(new x)}onMouseDown(t){this.handlers.forEach((e=>{e.onMouseDown(t)}))}onMouseMove(t){this.handlers.forEach((e=>{e.onMouseMove(t)}))}onMouseUp(t){this.handlers.forEach((e=>{e.onMouseUp(t)}))}onMouseWheel(t){this.handlers.forEach((e=>{e.onMouseWheel(t)}))}onKeyDown(t){this.handlers.forEach((e=>{e.onKeyDown(t)}))}onKeyUp(t){this.handlers.forEach((e=>{e.onKeyUp(t)}))}}class f{constructor(t){this.event=new i(t),this.handler=new w,this.handlers=new Map,this.dragHandler=null}addHandler(t){this.handlers.set(t.type,t)}removeHandler(t){this.handlers.delete(t.type)}startDragHandler(t){this.dragHandler=t}finishDragHandler(){this.dragHandler=null}onDoubleClick(t){this.#t(t),this.handlers.forEach((t=>{t.onDoubleClick(this.event)}))}onMouseDown(t){this.#t(t),this.handler.onMouseDown(this.event),null===this.dragHandler?this.handlers.forEach((t=>{t.onMouseDown(this.event)})):this.dragHandler.onMouseDown(this.event)}onMouseMove(t){this.#t(t),this.handler.onMouseMove(this.event),null===this.dragHandler?this.handlers.forEach((t=>{t.onMouseMove(this.event)})):this.dragHandler.onMouseMove(this.event)}onMouseUp(t){this.#t(t),this.handler.onMouseUp(this.event),null===this.dragHandler?this.handlers.forEach((t=>{t.onMouseUp(this.event)})):this.dragHandler.onMouseUp(this.event)}onKeyDown(t){this.#t(t),this.handler.onKeyDown(this.event),null===this.dragHandler?this.handlers.forEach((t=>{t.onKeyDown(this.event)})):this.dragHandler.onKeyDown(this.event)}onMouseWheel(t){this.#t(t),this.handler.onMouseWheel(this.event),null===this.dragHandler?this.handlers.forEach((t=>{t.onMouseWheel(this.event)})):this.dragHandler.onMouseWheel(this.event)}onKeyUp(t){this.#t(t),this.handler.onKeyUp(this.event),null===this.dragHandler?this.handlers.forEach((t=>{t.onKeyUp(this.event)})):this.dragHandler.onKeyUp(this.event)}#t(t){this.event.originEvent=t}}const C="solid",v="dash";class _{constructor(t){this._ctx=t}get ctx(){return this._ctx}drawLabel(t){const e=t.minPoint.x,n=t.maxPoint.y;this.ctx.font=`${t.fontSize}px Arial`,this.ctx.fillStyle=t.fontColor,this.ctx.textBaseline="bottom",this.ctx.fillText(t.text,e,n)}drawText(t,e,n=10,o="black"){this.ctx.fillText(e,t.x,t.y)}drawLine(t,e,n="black",o=1,i=1,r=C){return this.start(),this.lineOption(n,o,i,r),this.line(t,e),this.lineEnd(),this.end(),this}lineOption(t="black",e=1,n=1,o=C){const i=this._ctx;i.strokeStyle=t,i.lineWidth=e,i.globalAlpha=n,o!==C&&this.ctx.setLineDash([5,5])}line(t,e){const n=this._ctx;n.moveTo(t.x,t.y),n.lineTo(e.x,e.y)}lineEnd(){this.ctx.stroke()}start(){const t=this._ctx;t.save(),t.beginPath()}end(){const t=this._ctx;t.closePath(),t.restore()}drawRect(t){const e=t.lt,n=t.rt,o=t.rb,i=t.lb,r=this.ctx;r.moveTo(e.x,e.y),r.lineTo(n.x,n.y),r.lineTo(o.x,o.y),r.lineTo(i.x,i.y),r.lineTo(e.x,e.y),this.lineEnd()}drawTriangle(t){const e=t.top,n=t.left,o=t.right,i=this.ctx;i.moveTo(e.x,e.y),i.lineTo(n.x,n.y),i.lineTo(o.x,o.y),i.lineTo(e.x,e.y),this.lineEnd()}drawCircle(t){this.ctx.ellipse(t.p.x,t.p.y,t.xRadius,t.yRadius,0,0,2*Math.PI),this.lineEnd()}fill(t,e=1){const n=this.ctx;n.fillStyle=t,n.globalAlpha=e,n.fill()}drawImage(t,e,n,o,i){this._ctx.drawImage(t,e,n,o,i)}}class P{constructor(){this._curPoint={x:0,y:0},this._orgPoint={x:0,y:0},this._wayPoint={x:0,y:0},this._dpr=window.devicePixelRatio}get curPoint(){return this._curPoint}set curPoint(t){this._curPoint=t}get orgPoint(){return this._orgPoint}set orgPoint(t){this._orgPoint=t}get wayPoint(){return this._wayPoint}set wayPoint(t){this._wayPoint.x=t.x,this._wayPoint.y=t.y}get dpr(){return this._dpr}set dpr(t){this._dpr=t}}class M{constructor(t){this.ctx=t,this.ctx.canvas.cursor="move",this._painter=new _(t),this._coordinate=new P,this._controls=[],this._newControl=null,this._selectControls=[],this._selectRender=null,this._hoverRender=null,this._copyControl=null,this.gridSize=25,this.gridCount=5,this._viewControlOrder=!1}get width(){return this.ctx.canvas.width}get height(){return this.ctx.canvas.height}get controls(){return this._controls}get newControl(){return this._newControl}set newControl(t){this._newControl=t}get selectControls(){return this._selectControls}get selectRender(){return this._selectRender}set selectRender(t){this._selectRender=t}get hoverRender(){return this._hoverRender}set hoverRender(t){this._hoverRender=t}get copyControl(){return this._copyControl}set copyControl(t){this._copyControl=t}get painter(){return this._painter}setCursor(t){this.ctx.canvas.style.cursor=t}get viewControlOrder(){return this._viewControlOrder}set viewControlOrder(t){this._viewControlOrder=t}get coordinate(){return this._coordinate}addControl(t){this.controls.push(t),this.render()}removeControl(t){this._controls=this.controls.filter((e=>e!==t)),t===this.selectRender?.control&&(this.selectRender=null,this.hoverRender=null),this.render()}render(){this.transform(),this.renderBackground(),this._controls.forEach(((t,e)=>{t.render(this.painter),this.viewControlOrder&&this.painter.drawText(t.minPoint,e)})),this.hoverRender?.render(this.painter),this.selectRender?.render(this.painter)}captureRender(){this.initTransform(),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this._controls.forEach((t=>{t.render(this.painter)}))}renderBackground(){this.renderGrid()}renderGrid(){const t=this.coordinate,e=t.dpr,n=t.wayPoint,o=t.orgPoint,i=this.ctx.canvas.width/e,r=this.ctx.canvas.height/e,s=-o.x/e-n.x,a=s+i,l=-o.y/e-n.y,d=l+r;this.ctx.clearRect(s-1,l-1,i+2,r+2);const c=this.ctx.canvas.width,h=this.ctx.canvas.height;this.painter.drawLine({x:0,y:0},{x:c,y:0},"blue",3,1),this.painter.drawLine({x:c,y:0},{x:c,y:h},"blue",3,1),this.painter.drawLine({x:c,y:h},{x:0,y:h},"blue",3,1),this.painter.drawLine({x:0,y:h},{x:0,y:0},"blue",3,1),this.renderGridLine(s,a,l,d,!0),this.renderGridLine(l,d,s,a,!1)}renderGridLine(t,e,n,o,i){const r=this.gridSize;let s=t%r,a=Math.floor(t/r);0!==s&&(a=t<0?a-1:a+1,t=a*r);for(let s=t;s<e;){const t=a%this.gridCount==0?2:1,e=a%this.gridCount==0?"rgba(0, 0, 0, 0.6)":"rgb(129, 138, 138)",l=this.getLinePoint({x:s,y:n},{x:s,y:o},i);this.painter.drawLine(l.p1,l.p2,e,t,.5),s+=r,++a}}getLinePoint(t,e,n){return n?{p1:t,p2:e}:{p1:{x:t.y,y:t.x},p2:{x:e.y,y:e.x}}}scaleIn(){const t=this.coordinate;if(10===t.dpr)return;let e=1.05;t.dpr>10&&(e=10/t.dpr),this.scale(e),this.render()}scaleOut(){const t=this.coordinate;if(1===t.dpr)return;let e=.95;t.dpr<1&&(e=1/t.dpr),this.scale(e),this.render()}scale(t){const e=this._coordinate;e.dpr*=t;const n={x:e.orgPoint.x,y:e.orgPoint.y};e.orgPoint={x:e.curPoint.x-(e.curPoint.x-n.x)*t,y:e.curPoint.y-(e.curPoint.y-n.y)*t};const o=e.orgPoint,i=e.wayPoint;let r=-o.x/e.dpr-i.x;const s=this.width,a=n.x;if(r<0){let i=o.x+r*e.dpr,s=(i-a*t)/(1-t);i=s-(s-n.x)*t,e.curPoint.x=s,o.x=i}else if(s<this.width/e.dpr+r){const i=this.width/e.dpr+r-s;let l=o.x+i*e.dpr,d=(l-a*t)/(1-t);l=d-(d-n.x)*t,e.curPoint.x=d,o.x=l}let l=-o.y/e.dpr-i.y;const d=this.height,c=n.y;if(l<0){let i=o.y+l*e.dpr,r=(i-c*t)/(1-t);i=r-(r-n.y)*t,e.curPoint.y=r,o.y=i}else if(d<this.height/e.dpr+l){const i=this.height/e.dpr+l-d;let r=o.y+i*e.dpr,s=(r-c*t)/(1-t);r=s-(s-n.y)*t,e.curPoint.y=s,o.y=r}e.curPoint;this.transform()}transform(){const t=this.coordinate.orgPoint,e=this.coordinate.wayPoint,n=this.coordinate.dpr,o=e.x*n,i=e.y*n;this.ctx.setTransform(n,0,0,n,t.x+o,t.y+i)}initTransform(){this.ctx.setTransform(1,0,0,1,0,0)}}class k{constructor(t){this.editor=t}active(){}deActive(){}}class R{constructor(){this._lt={x:0,y:0},this._rt={x:0,y:0},this._rb={x:0,y:0},this._lb={x:0,y:0}}get lt(){return this._lt}get rt(){return this._rt}get rb(){return this._rb}get lb(){return this._lb}updatePosition(t,e){this.lt.x=t.x,this.lt.y=t.y,this.rb.x=e.x,this.rb.y=e.y,this.rt.x=e.x,this.rt.y=t.y,this.lb.x=t.x,this.lb.y=e.y}}class z{static checkDragPosition(t,e,n){Math.abs(e.x-n.x)<=10&&Math.abs(e.y-n.y)<=10&&t.setPosition(n)}static generateResizeRect(t){const e=new R;return e.updatePosition({x:t.x-2,y:t.y-2},{x:t.x+2,y:t.y+2}),e}static ptInLine(t,e){let n=t.x,o=t.y,i=e.p1.x,r=e.p1.y,s=e.p2.x,a=e.p2.y;const l=Math.sqrt((s-i)**2+(a-r)**2);return Math.sqrt((i-n)**2+(r-o)**2)+Math.sqrt((s-n)**2+(a-o)**2)-l<=1}}const E="none",S="left",T="right",I="top",L="bottom",U="left-top",B="right-top",D="right-bottom",H="left-bottom";class W{constructor(t){this._control=t,this._resizeType=E}get control(){return this._control}get resizeType(){return this._resizeType}set resizeType(t){this._resizeType=t}render(t){}}class O extends W{constructor(t){super(t)}render(t){const e=this.control;t.drawLine(e.p1,e.p2,"grey",1,.5)}}class F{constructor(t,e){this.name=t,this.runner=e}run(){this.runner()}}class A extends m{constructor(t){super(),this.line=t.page.newControl,this.editor=t,t.addForegroundRender(new O(this.line)),t.historyManager.startUndo(new F("undo create line",(()=>{t.page.removeControl(this.line)})))}get type(){return d}onMouseDown(t){t.editor.page.selectRender=null}onMouseMove(t){t.down?(this.line.p1.x=t.downPoint.x,this.line.p1.y=t.downPoint.y,this.line.p2.x=t.point.x,this.line.p2.y=t.point.y):this.line.setPosition(t.point),this.editor.render()}onMouseUp(t){z.checkDragPosition(this.line,t.downPoint,t.point),this.line.updatePosition(),this.editor.removeForegroundRender(),this.editor.clearCommand(),t.editor.page.addControl(this.line),t.editor.historyManager.endUndo(new F("redo create line",(()=>{this.editor.page.addControl(this.line)})))}onMouseWheel(t){}onKeyDown(t){}onKeyUp(t){}}class N extends k{constructor(t){super(t),this.handler=new A(t)}active(){this.editor.addEventHandler(this.handler)}deActive(){this.editor.removeEventHandler(this.handler)}}class K extends W{constructor(t){super(t)}render(t){t.start(),t.lineOption("grey",1,.5),t.drawRect(this.control),t.fill(this.control.fillColor,.1),t.end()}}class j extends m{constructor(t){super(),this.editor=t,this.rect=t.page.newControl,t.addForegroundRender(new K(this.rect)),t.historyManager.startUndo(new F("undo create rect",(()=>{t.page.removeControl(this.rect)})))}get type(){return c}onMouseDown(t){t.editor.page.selectRender=null}onMouseMove(t){const e=this.rect;t.down?(e.lt.x=t.downPoint.x,e.lt.y=t.downPoint.y,e.rt.x=t.point.x,e.rt.y=t.downPoint.y,e.rb.x=t.point.x,e.rb.y=t.point.y,e.lb.x=t.downPoint.x,e.lb.y=t.point.y):e.setPosition(t.point),this.editor.render()}onMouseUp(t){z.checkDragPosition(this.rect,t.downPoint,t.point),this.rect.updatePosition(),this.editor.removeForegroundRender(),this.editor.clearCommand(),t.editor.page.addControl(this.rect),t.editor.historyManager.endUndo(new F("redo create rect",(()=>{this.editor.page.addControl(this.rect)})))}}class Z extends k{constructor(t){super(t),this.handler=new j(t)}active(){this.editor.addEventHandler(this.handler)}deActive(){this.editor.removeEventHandler(this.handler)}}class Q{constructor(){this.command=null}execute(t){this.command?.deActive(),t.active(),this.command=t}}class $ extends m{constructor(){super()}get type(){return a}onMouseMove(t){if(!t.down)return;const e=t.editor.page,n=e.coordinate,o=t.downPoint;let i=t.point.x-o.x,r=t.point.y-o.y;const s=n.orgPoint,a=n.dpr,l=n.wayPoint,d=-s.x/a,c=e.width,h=l.x+i;d<h?i=d-l.x:c<e.width/a-h+d&&(i=e.width/a-l.x+d-c),l.x+=i;const p=-s.y/a,u=e.height,g=l.y+r;p<g?r=p-l.y:u<e.height/a-g+p&&(r=e.height/a-l.y+p-u),l.y+=r,e.render()}onMouseUp(t){t.editor.finishDragHandler()}}class Y extends F{constructor(t,e){const n=[];e.points.forEach(((t,e)=>{n[e]=t.copy()}));const o=e?.fontSize??0;super(t,(()=>{for(let t=0;t<e.points.length;++t)e.points[t]=n[t];e.updatePosition(),0!==o&&(e.fontSize=o)}))}}class X extends m{onMouseMove(t){const e=t.editor.page.selectRender.control,n=t.point.x-t.downPoint.x,o=t.point.y-t.downPoint.y;e.move({x:n,y:o}),t.downPoint.x=t.point.x,t.downPoint.y=t.point.y,e.updateSelectPosition(),t.editor.page.render()}onMouseUp(t){t.editor.finishDragHandler();const e=Math.abs(t.dragPoint.x-t.point.x),n=Math.abs(t.dragPoint.y-t.point.y);e<=1&&n<=1||t.editor.historyManager.endUndo(new Y("redo move",t.editor.page.selectRender.control))}}const q="default",G="move",J="nwse-resize",V="nesw-resize",tt="ew-resize",et="ns-resize",nt="text";class ot extends m{onMouseMove(t){const e=t.editor.page.selectRender,n=e.resizeType,o=t.point.x-t.downPoint.x,i=t.point.y-t.downPoint.y;t.downPoint.x=t.point.x,t.downPoint.y=t.point.y,e.control.resize(n,{x:o,y:i}),t.editor.render()}onMouseUp(t){const e=t.editor.page.selectRender.control;e.updatePointPosition(),e.updatePointRatio(),t.editor.finishDragHandler();const n=Math.abs(t.dragPoint.x-t.point.x),o=Math.abs(t.dragPoint.y-t.point.y);n<=1&&o<=1||t.editor.historyManager.endUndo(new Y("redo Resize",e))}}class it extends W{constructor(t){super(t),this.selectionRect=new R}render(t){const e=this.control;e.updateSelectPosition(),this.selectionRect.updatePosition(e.minPoint,e.maxPoint);const n=this.selectionRect;t.start(),t.lineOption("rgb(53,155,255)",1,.8),t.drawRect(n),t.end(),t.start(),t.lineOption("black");let o=z.generateResizeRect(n.lt);t.drawRect(o),o=z.generateResizeRect(n.rt),t.drawRect(o),o=z.generateResizeRect(n.rb),t.drawRect(o),o=z.generateResizeRect(n.lb),t.drawRect(o),t.fill("white"),t.end()}}const rt="none",st="line",at="rect",lt="triangle",dt="circle",ct="image",ht="label",pt="polygon";class ut{constructor(){this._lineWidth=1,this._lineColor="black",this._lineStyle=C,this._fillColor="rgb(189,246,197)",this._opacity=.5,this._select=!1,this._hover=!1,this._minPoint={x:0,y:0},this._maxPoint={x:0,y:0},this.selectionRect=new R}get type(){return rt}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t}get lineColor(){return this._lineColor}set lineColor(t){this._lineColor=t}get lineStyle(){return this._lineStyle}set lineStyle(t){this._lineStyle=t}get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t}get opacity(){return this._opacity}set opacity(t){this._opacity=t}get select(){return this._select}set select(t){this._select=t}get hover(){return this._hover}set hover(t){this._hover=t}get minPoint(){return this._minPoint}get maxPoint(){return this._maxPoint}get width(){return this.maxPoint.x-this.minPoint.x}get height(){return this.maxPoint.y-this.minPoint.y}updatePosition(){this.updateSelectPosition(),this.updatePointPosition(),this.updatePointRatio()}updateSelectPosition(){}updatePointPosition(){}updatePointRatio(){}move(t){}resize(t,e){}setPosition(t){}render(t){}ptInControl(t){return!1}ptInHoverControl(t){return null}ptInSelectControl(t){return this.ptInControl(t)?new it(this):null}ptInResizePoint(t){this.selectionRect.updatePosition(this.minPoint,this.maxPoint);const e=this.selectionRect.lt,n=this.selectionRect.rt,o=this.selectionRect.rb,i=this.selectionRect.lb;return this.#n(z.generateResizeRect(e),t)?U:this.#n(z.generateResizeRect(n),t)?B:this.#n(z.generateResizeRect(o),t)?D:this.#n(z.generateResizeRect(i),t)?H:z.ptInLine(t,{p1:e,p2:i})?S:z.ptInLine(t,{p1:n,p2:o})?T:z.ptInLine(t,{p1:e,p2:n})?I:z.ptInLine(t,{p1:i,p2:o})?L:E}#n(t,e){return t.lt.x<=e.x&&e.x<=t.rb.x&&t.lt.y<=e.y&&e.y<=t.rb.y}clone(t){this.lineWidth=t.lineWidth,this.lineColor=t.lineColor,this.lineStyle=t.lineStyle,this.fillColor=t.fillColor,this.opacity=t.opacity}}const gt=-50,yt=-30,mt=10,bt=60,xt=100,wt=30;class ft{static instance;constructor(){}static getInstance(){return this.instance||(this.instance=this,this.lineOptionToolbar=document.getElementById("line-option"),this.lineWidthToolbar=document.getElementById("line-width"),this.lineStyleToolbar=document.getElementById("line-style"),this.lineColorToolbar=document.getElementById("line-color"),this.fillColorToolbar=document.getElementById("fill-color"),this.fillColorBtn=document.getElementById("fill-color-btn"),this.fontOptionToolbar=document.getElementById("font-option"),this.fontColorToolbar=document.getElementById("font-color"),this.fontSize=document.getElementById("font-size")),this.instance}static showFontOptionToolbar(t,e){this.fontOptionToolbar.classList.remove("hidden"),this.fontOptionToolbar.style.top=t.y+"px",this.fontOptionToolbar.style.left=t.x+"px",this.fontSize.value=Math.round(e.fontSize),this.#o(this.fontOptionToolbar,t.x)}static hideFontOptionToolbar(){this.fontOptionToolbar.classList.add("hidden"),this.fontColorToolbar.classList.add("hidden")}static showControlOptionToolbar(t,e){if(e.type===ht)return this.clear(),void this.showFontOptionToolbar(t,e);this.lineOptionToolbar.classList.remove("hidden"),this.lineWidthToolbar.classList.add("hidden"),this.lineStyleToolbar.classList.add("hidden"),this.lineColorToolbar.classList.add("hidden"),this.fillColorToolbar.classList.add("hidden"),e.type===st||e.type===ct?this.fillColorBtn.classList.add("hidden"):this.fillColorBtn.classList.remove("hidden"),this.lineOptionToolbar.style.top=t.y+"px",this.lineOptionToolbar.style.left=t.x+"px",this.#o(this.lineOptionToolbar,t.x)}static hideLineOptionToolbar(){this.lineOptionToolbar.classList.add("hidden"),this.lineWidthToolbar.classList.add("hidden"),this.lineStyleToolbar.classList.add("hidden"),this.lineColorToolbar.classList.add("hidden"),this.fillColorToolbar.classList.add("hidden")}static showLineWidthToolbar(){this.lineWidthToolbar.classList.remove("hidden"),this.lineStyleToolbar.classList.add("hidden"),this.lineColorToolbar.classList.add("hidden"),this.fillColorToolbar.classList.add("hidden"),this.#o(this.lineWidthToolbar,yt)}static showLineStyleToolbar(){this.lineStyleToolbar.classList.remove("hidden"),this.lineWidthToolbar.classList.add("hidden"),this.lineColorToolbar.classList.add("hidden"),this.fillColorToolbar.classList.add("hidden")}static showLineColorToolbar(){this.lineColorToolbar.classList.remove("hidden"),this.lineStyleToolbar.classList.add("hidden"),this.lineWidthToolbar.classList.add("hidden"),this.fillColorToolbar.classList.add("hidden"),this.#o(this.lineColorToolbar,bt)}static showFillColorToolbar(){this.fillColorToolbar.classList.remove("hidden"),this.lineColorToolbar.classList.add("hidden"),this.lineStyleToolbar.classList.add("hidden"),this.lineWidthToolbar.classList.add("hidden"),this.#o(this.fillColorToolbar,xt)}static showFontColorToolbar(){this.fontColorToolbar.classList.remove("hidden"),this.#o(this.fontColorToolbar,wt)}static#o(t,e){const n=t.getBoundingClientRect(),o=window.innerWidth||document.documentElement.clientWidth,i=n.right-o;let r=t.style.left.replace("px","");i>=0?(r-=i,t.style.left=r+"px"):t.style.left=e+"px"}static clear(){this.hideLineOptionToolbar(),this.hideFontOptionToolbar()}}class Ct extends m{constructor(){super()}get type(){return y}onDoubleClick(t){const e=t.editor.page;if(e?.selectRender?.control?.type===ht){const e=t.editor.page.selectRender.control;t.editor.textEditor.updateLabel(e);const n=e.lt,o=t.point,i={x:o.x-n.x,y:o.y-n.y},r=t.editor.page.coordinate.dpr;i.x*=r,i.y*=r,t.editor.textEditor.show({x:t.clientPoint.x-i.x,y:t.clientPoint.y-i.y}),t.editor.tools.editeLabel(),ft.getInstance().clear()}}onMouseDown(t){const e=t.editor.page;if(null!==e.selectRender&&e.selectRender.resizeType!==E)return t.editor.historyManager.startUndo(new Y("undo resize",e.selectRender.control)),void t.editor.startDragHandler(new ot);let n=null;e.controls.slice().reverse().some((e=>(n=e.ptInSelectControl(t.point),null!==n))),e.selectRender=n,null===n&&(ft.getInstance().hideLineOptionToolbar(),t.editor.startDragHandler(new $)),e.render()}onMouseMove(t){const e=t.editor.page;if(e.coordinate.curPoint={x:t.originEvent.offsetX,y:t.originEvent.offsetY},t.down&&null!==e.selectRender)return e.setCursor(G),t.editor.historyManager.startUndo(new Y("undo move",e.selectRender.control)),void t.editor.startDragHandler(new X);let n=null;if(e.controls.slice().reverse().some((e=>(n=e.ptInHoverControl(t.point),null!==n))),null!==e.selectRender){const o=e.selectRender.control.ptInResizePoint(t.point);e.selectRender.resizeType=o,o===U||o===D?e.setCursor(J):o===B||o===H?e.setCursor(V):o===S||o===T?e.setCursor(tt):o===I||o===L?e.setCursor(et):null!==n&&e.selectRender.control===n.control?e.setCursor(G):e.setCursor(q),e.selectRender.control.type!==ht||o!==S&&o!==T&&o!==I&&o!==L||(e.setCursor(q),e.selectRender.resizeType=E)}else e.setCursor(q);e.hoverRender=n,e.render()}onMouseUp(t){const e=t.editor.page;null!==e.selectRender&&ft.getInstance().showControlOptionToolbar(t.originPoint,e.selectRender.control)}onMouseWheel(t){}onKeyDown(t){}onKeyUp(t){}}class vt extends m{get type(){return l}onMouseWheel(t){const e=t.editor.page;t.originEvent.deltaY<0?e.scaleIn():e.scaleOut(),e.render()}}class _t extends k{constructor(t){super(),this.editor=t,this.handlers=[],this.handlers.push(new vt),this.handlers.push(new Ct)}active(){this.handlers.forEach((t=>{this.editor.addEventHandler(t)}))}deActive(){this.handlers.forEach((t=>{this.editor.removeEventHandler(t)}))}}class Pt extends W{constructor(t){super(t)}render(t){t.start(),t.lineOption("grey",1,.5),t.drawTriangle(this.control),t.fill(this.control.fillColor,.1),t.end()}}class Mt extends m{constructor(t){super(),this.editor=t,this.triangle=t.page.newControl,t.addForegroundRender(new Pt(this.triangle)),t.historyManager.startUndo(new F("undo create triangle",(()=>{t.page.removeControl(this.triangle)})))}get type(){return h}onMouseDown(t){t.editor.page.selectRender=null}onMouseMove(t){if(t.down){const e=t.point.x-t.downPoint.x;this.triangle.top.x=t.downPoint.x+e/2,this.triangle.top.y=t.downPoint.y,this.triangle.left.x=t.downPoint.x,this.triangle.left.y=t.point.y,this.triangle.right.x=t.point.x,this.triangle.right.y=t.point.y}else this.triangle.setPosition(t.point);t.editor.render()}onMouseUp(t){z.checkDragPosition(this.triangle,t.downPoint,t.point),this.triangle.updatePosition(),this.editor.removeForegroundRender(),this.editor.clearCommand(),t.editor.page.addControl(this.triangle),t.editor.historyManager.endUndo(new F("redo create triangle",(()=>{this.editor.page.addControl(this.triangle)})))}onKeyUp(t){super.onKeyUp(t)}}class kt extends k{constructor(t){super(),this.editor=t,this.handler=new Mt(t)}active(){this.editor.addEventHandler(this.handler)}deActive(){this.editor.removeEventHandler(this.handler)}}class Rt extends W{constructor(t){super(t)}render(t){const e=this.control;t.start(),t.lineOption(e.lineColor,e.lineWidth,.5),t.drawCircle(e),t.fill(e.fillColor,.1),t.end()}}class zt extends m{constructor(t){super(),this.editor=t,this.circle=t.page.newControl,t.addForegroundRender(new Rt(this.circle)),t.historyManager.startUndo(new F("undo create circle",(()=>{t.page.removeControl(this.circle)})))}get type(){return p}onMouseDown(t){t.editor.page.selectRender=null}onMouseMove(t){t.down?(this.circle.lt.x=t.downPoint.x,this.circle.lt.y=t.downPoint.y,this.circle.rt.x=t.point.x,this.circle.rt.y=t.downPoint.y,this.circle.rb.x=t.point.x,this.circle.rb.y=t.point.y,this.circle.lb.x=t.downPoint.x,this.circle.lb.y=t.point.y):this.circle.setPosition(t.point),this.editor.render()}onMouseUp(t){z.checkDragPosition(this.circle,t.downPoint,t.point),this.circle.updatePosition(),this.editor.removeForegroundRender(),this.editor.clearCommand(),t.editor.historyManager.endUndo(new F("redo create circle",(()=>{this.editor.page.addControl(this.circle)}))),t.editor.page.addControl(this.circle)}}class Et extends k{constructor(t){super(t),this.handler=new zt(t)}active(){this.editor.addEventHandler(this.handler)}deActive(){this.editor.removeEventHandler(this.handler)}}class St extends W{constructor(t){super(),this.imageRect=t}render(t){const e=this.imageRect,n=e.rb.x-e.lt.x,o=e.rb.y-e.lt.y;t.drawImage(this.imageRect.image,e.lt.x,e.lt.y,n,o)}}class Tt extends ut{constructor(){super(),this._points=[]}get type(){return pt}get points(){return this._points}resize(t,e){this._points.forEach((n=>{switch(t){case U:this.#i(e,n);break;case B:this.#r(e,n);break;case D:this.#s(e,n);break;case H:this.#a(e,n);break;case S:this.#l(e,n);break;case T:this.#d(e,n);break;case I:this.#c(e,n);break;case L:this.#h(e,n)}}))}#l(t,e){switch(e.position){case I:case L:e.x+=t.x*e.xRatio;break;case S:case U:case H:e.x+=t.x;break;case T:case B:case D:return;default:e.x+=t.x*e.xRatio}}#d(t,e){switch(e.position){case I:case L:e.x+=t.x*e.xRatio;break;case T:case B:case D:e.x+=t.x;break;case S:case U:case H:return;default:e.x+=t.x*e.xRatio}}#c(t,e){switch(e.position){case S:case T:e.y+=t.y*e.yRatio;break;case I:case U:case B:e.y+=t.y;break;case L:case H:case D:return;default:e.y+=t.y*e.yRatio}}#h(t,e){switch(e.position){case S:case T:e.y+=t.y*e.yRatio;break;case L:case H:case D:e.y+=t.y;break;case I:case U:case B:return;default:e.y+=t.y*e.yRatio}}#i(t,e){this.#l(t,e),this.#c(t,e)}#r(t,e){this.#d(t,e),this.#c(t,e)}#s(t,e){this.#d(t,e),this.#h(t,e)}#a(t,e){this.#l(t,e),this.#h(t,e)}updateSelectPosition(){0!==this.points.length&&(this.minPoint.x=this.points[0].x,this.minPoint.y=this.points[0].y,this.maxPoint.x=this.points[0].x,this.maxPoint.y=this.points[0].y,this.points.forEach((t=>{this.minPoint.x=Math.min(this.minPoint.x,t.x),this.minPoint.y=Math.min(this.minPoint.y,t.y),this.maxPoint.x=Math.max(this.maxPoint.x,t.x),this.maxPoint.y=Math.max(this.maxPoint.y,t.y)})))}updatePointPosition(){this.points.forEach((t=>{t.x===this.minPoint.x&&t.y===this.minPoint.y?t.position=U:t.x===this.maxPoint.x&&t.y===this.maxPoint.y?t.position=D:t.x===this.maxPoint.x&&t.y===this.minPoint.y?t.position=B:t.x===this.minPoint.x&&t.y===this.maxPoint.y?t.position=H:t.x===this.minPoint.x?t.position=S:t.x===this.maxPoint.x?t.position=T:t.y===this.minPoint.y?t.position=I:t.y===this.maxPoint.y?t.position=L:t.position=E}))}updatePointRatio(){this._points.forEach((t=>{const e=t.x-this.minPoint.x,n=t.y-this.minPoint.y;t.xRatio=e/this.width,t.yRatio=n/this.height}))}move(t){this._points.forEach((e=>{e.x+=t.x,e.y+=t.y}))}render(t){const e=this._points,n=t.ctx;t.start(),t.lineOption(this.lineColor,this.lineWidth,1,this.lineStyle),n.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;++t){const o=e[t];n.lineTo(o.x,o.y)}const o=e[0];n.lineTo(o.x,o.y),t.lineEnd(),n.lineWidth=this.lineWidth,"none"!==this.fillColor&&t.fill(this.fillColor,this.opacity),t.end()}ptInControl(t){let e=t.x,n=t.y,o=!1;const i=this.points;for(let t=0,r=i.length-1;t<i.length;r=t++){let s=i[t].x,a=i[t].y,l=i[r].x,d=i[r].y;a>n!=d>n&&e<(l-s)*(n-a)/(d-a)+s&&(o=!o)}return o}ptInHoverControl(t){super.ptInHoverControl(t)}ptInSelectControl(t){return super.ptInSelectControl(t)}clone(t){super.clone(t)}}class It extends W{constructor(t){super(t)}render(t){t.start(),t.lineOption("grey",0),t.drawRect(this.control),t.fill("rgb(53,155,255)",.5),t.end()}}class Lt{constructor(t){return this._x=0,this._y=0,this._xRatio=0,this._yRatio=0,this._position=t??E,this}get x(){return this._x}set x(t){this._x=t}get xRatio(){return this._xRatio}set xRatio(t){this._xRatio=t}get yRatio(){return this._yRatio}set yRatio(t){this._yRatio=t}get y(){return this._y}set y(t){this._y=t}get position(){return this._position}set position(t){this._position=t}copy(){const t=new Lt(this.position);return t.x=this.x,t.y=this.y,t.xRatio=this.xRatio,t.yRatio=this.yRatio,t}clone(t){this.x=t.x,this.y=t.y,this.xRatio=t.xRatio,this.yRatio=t.yRatio}}class Ut extends Tt{constructor(){super(),this._lt=new Lt(U),this._rt=new Lt(B),this._rb=new Lt(D),this._lb=new Lt(H),this.points.push(this._lt),this.points.push(this._rt),this.points.push(this._rb),this.points.push(this._lb)}get type(){return at}get lt(){return this._lt}get rt(){return this._rt}get rb(){return this._rb}get lb(){return this._lb}updateSelectPosition(){super.updateSelectPosition()}updatePointPosition(){super.updatePointPosition(),this.points.forEach((t=>{switch(t.position){case U:this._lt=t;break;case B:this._rt=t;break;case D:this._rb=t;break;case H:this._lb=t}}))}move(t){super.move(t)}resize(t,e){super.resize(t,e)}setPosition(t){this._lt.x=t.x,this._lt.y=t.y,this._rt.x=t.x+50,this._rt.y=t.y,this._rb.x=t.x+50,this._rb.y=t.y+50,this._lb.x=t.x,this._lb.y=t.y+50}render(t){super.render(t)}ptInControl(t){return super.ptInControl(t)}ptInHoverControl(t){return this.ptInControl(t)?new It(this):null}clone(t){this.lt.clone(t.lt),this.rt.clone(t.rt),this.rb.clone(t.rb),this.lb.clone(t.lb),super.clone(t)}}class Bt extends Ut{constructor(t){super(),this._image=t,this.fillColor="none"}get type(){return ct}get image(){return this._image}set image(t){this._image=t}setPosition(t){super.setPosition(t)}render(t){const e=this.rb.x-this.lt.x,n=this.rb.y-this.lt.y;t.drawImage(this._image,this.lt.x,this.lt.y,e,n),super.render(t)}clone(t){super.clone(t),this._image=t.image}}class Dt extends m{constructor(t,e){super(),this.editor=t,this.image=new Bt(e),t.addForegroundRender(new St(this.image)),t.historyManager.startUndo(new F("undo create image",(()=>{t.page.removeControl(this.image)}))),this._maxImage=!1}get type(){return u}onMouseDown(t){t.editor.page.selectRender=null}onMouseMove(t){this._maxImage=!1;const e=this.image;t.down?(e.lt.x=t.downPoint.x,e.lt.y=t.downPoint.y,e.rt.x=t.point.x,e.rt.y=t.downPoint.y,e.rb.x=t.point.x,e.rb.y=t.point.y,e.lb.x=t.downPoint.x,e.lb.y=t.point.y):e.setPosition(t.point),this.editor.render()}onMouseUp(t){this._maxImage||z.checkDragPosition(this.image,t.downPoint,t.point),this.image.updatePosition(),this.editor.removeForegroundRender(),this.editor.clearCommand(),t.editor.page.addControl(this.image),t.editor.historyManager.endUndo(new F("redo create image",(()=>{this.editor.page.addControl(this.image)})))}onKeyDown(t){if(" "!==t.originEvent.key)return;this._maxImage=!0;const e=this.image,n=t.editor.width,o=t.editor.height;e.lt.x=0,e.lt.y=0,e.rt.x=n,e.rt.y=0,e.rb.x=n,e.rb.y=o,e.lb.x=0,e.lb.y=o,t.editor.render()}}class Ht extends k{constructor(t,e){super(t),this.handler=new Dt(t,e)}active(){this.editor.addEventHandler(this.handler)}deActive(){this.editor.removeEventHandler(this.handler)}}class Wt extends W{constructor(t){super(t)}render(t){const e=this.control;t.drawLine(e.p1,e.p2,"rgb(53,155,255)",3,.5)}}class Ot extends Tt{constructor(){super(),this._p1=new Lt(U),this._p2=new Lt(D),this.points.push(this.p1),this.points.push(this.p2)}get type(){return st}get p1(){return this._p1}get p2(){return this._p2}setPosition(t){this.p1.x=t.x,this.p1.y=t.y,this.p2.x=t.x+50,this.p2.y=t.y+50}updateSelectPosition(){super.updateSelectPosition()}move(t){super.move(t)}resize(t,e){super.resize(t,e)}render(t){t.drawLine(this.p1,this.p2,this.lineColor,this.lineWidth,1,this.lineStyle)}ptInControl(t){return z.ptInLine(t,this)}ptInHoverControl(t){return this.ptInControl(t)?new Wt(this):null}ptInSelectControl(t){return super.ptInSelectControl(t)}clone(t){this.p1.x=t.p1.x,this.p1.y=t.p1.y,this.p2.x=t.p2.x,this.p2.y=t.p2.y,super.clone(t)}}class Ft extends W{constructor(t){super(t)}render(t){t.start(),t.lineOption("grey",0,.5),t.drawTriangle(this.control),t.fill("rgb(53,155,255)",.5),t.end()}}class At extends Tt{constructor(){super(),this._top=new Lt(I),this._left=new Lt(H),this._right=new Lt(D),this.points.push(this._top),this.points.push(this._left),this.points.push(this._right)}get type(){return lt}get top(){return this._top}get left(){return this._left}get right(){return this._right}updateSelectPosition(){super.updateSelectPosition()}updatePointPosition(){super.updatePointPosition(),this.points.forEach((t=>{switch(t.position){case L:case I:this._top=t;break;case U:case H:this._left=t;break;case B:case D:this._right=t}}))}move(t){super.move(t)}resize(t,e){return super.resize(t,e)}setPosition(t){this.top.x=t.x+25,this.top.y=t.y,this.left.x=t.x,this.left.y=t.y+50,this.right.x=t.x+50,this.right.y=t.y+50}render(t){super.render(t)}ptInControl(t){return super.ptInControl(t)}ptInHoverControl(t){return this.ptInControl(t)?new Ft(this):null}clone(t){this.top.clone(t.top),this.left.clone(t.left),this.right.clone(t.right),super.clone(t)}}class Nt extends W{constructor(t){super(t)}render(t){const e=this.control;t.start(),t.lineOption(e.lineColor,0,.5),t.drawCircle(e),t.fill("rgb(53,155,255)",.5),t.end()}}class Kt extends Ut{constructor(){super()}get type(){return dt}get p(){return{x:(this.rb.x+this.lt.x)/2,y:(this.rb.y+this.lt.y)/2}}get xRadius(){return Math.abs(this.rb.x-this.lt.x)/2}get yRadius(){return Math.abs(this.rb.y-this.lt.y)/2}resize(t,e){super.resize(t,e)}updateSelectPosition(){super.updateSelectPosition()}move(t){super.move(t)}setPosition(t){super.setPosition(t)}render(t){const e=t.ctx;t.start(),t.lineOption(this.lineColor,this.lineWidth,1,this.lineStyle),e.ellipse(this.p.x,this.p.y,this.xRadius,this.yRadius,0,0,2*Math.PI),t.lineEnd(),e.fillStyle=this.fillColor,e.fill(),t.end()}ptInControl(t){const e=this.p,n=t.x-e.x,o=t.y-e.y;return n*n/(this.xRadius*this.xRadius)+o*o/(this.yRadius*this.yRadius)<=1}ptInHoverControl(t){return this.ptInControl(t)?new Nt(this):null}ptInSelectControl(t){return super.ptInSelectControl(t)}}class jt{static _editor;static setEditor(t){this._editor||(this._editor=t)}static calculatorFontSize(t,e,n){const o=this._editor.ctx;o.save(),o.font=`${n} Arial`;const i=o.measureText(t).width??.1;o.restore();let r=e/i;return r<=0||i<=0?.1:n*r}static calculatorFontWidthHeight(t,e,n){const o=this._editor.ctx;o.save(),o.fontSize=`${e} Arial`,o.restore();const i=document.createElement("span");i.style.visibility="hidden",i.style.whiteSpace="pre",i.style.fontSize=e+"px",i.textContent=t,o.save(),o.font=`${e} Arial`;o.measureText(t).width;o.restore(),document.body.appendChild(i);const r=i.offsetWidth,s=i.offsetHeight;return document.body.removeChild(i),{width:r,height:s}}static getWhiteSpace(){return 16*this._editor.page.coordinate.dpr}}class Zt extends Ut{constructor(){super(),this._text="",this._fontSize=20,this._fontColor="rgb(0, 0, 0)"}get type(){return ht}get text(){return this._text}set text(t){this._text=t}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize=t}get fontColor(){return this._fontColor}set fontColor(t){this._fontColor=t}resize(t,e){super.resize(t,e);let n=Math.abs(this.rt.x-this.lt.x)??.1;this.fontSize=jt.calculatorFontSize(this.text,n,this.fontSize);let o=jt.calculatorFontWidthHeight(this.text,this.fontSize).height,i=0;switch(t){case U:case B:i=this.rb.y-o,this.lt.y=i,this.rt.y=i;break;case D:case H:i=this.rt.y+o,this.lb.y=i,this.rb.y=i}this.updateSelectPosition()}render(t){t.drawLabel(this)}clone(t){super.clone(t),this.text=t.text,this.fontSize=t.fontSize,this.fontColor=t.fontColor}}class Qt extends m{constructor(t){super(),this.label=t.page.newControl,this.textEditor=t.textEditor,this.textEditor.updateLabel(this.label),t.enabledShortcut=!1,this.isDown=!1,t.page.setCursor(nt),t.historyManager.startUndo(new F("undo create label",(()=>{t.page.removeControl(this.label)})))}get type(){return g}onMouseDown(t){if(this.isDown){if(t.editor.clearCommand(),""===this.textEditor.val)return void this.textEditor.hide();this.label.text=this.textEditor.val+"";const e=this.label.lt.x,n=this.label.lt.y,o=this.textEditor.getSize(),i=e+o.width+5,r=n+o.height;return this.label.rt.x=i,this.label.rt.y=n,this.label.lb.x=e,this.label.lb.y=r,this.label.rb.x=i,this.label.rb.y=r,this.label.updatePosition(),t.editor.page.addControl(this.label),this.textEditor.hide(),void t.editor.historyManager.endUndo(new F("redo create label",(()=>{t.editor.page.addControl(this.label)})))}this.isDown=!0,this.label.lt.x=t.point.x,this.label.lt.y=t.point.y,t.originEvent.preventDefault(),this.textEditor.show(t.clientPoint),this.textEditor.focus()}onMouseMove(t){super.onMouseMove(t)}onMouseUp(t){super.onMouseUp(t)}onMouseWheel(t){super.onMouseWheel(t)}onKeyDown(t){this.isDown||"Escape"!==t.originEvent.key||(t.editor.enabledShortcut=!0,t.editor.page.setCursor(q),t.editor.tools.clear())}}class $t extends k{constructor(t){super(t),this.handler=new Qt(t)}active(){this.editor.addEventHandler(this.handler)}deActive(){this.editor.removeEventHandler(this.handler)}}class Yt extends m{constructor(t){super(),this._label=t.page.selectRender.control,this._label.text=""}onMouseDown(t){const e=t.editor.textEditor;if(t.editor.clearCommand(),e.hide(),""===e.val)return void t.editor.page.removeControl(this._label);const n=e.val+"",o=this._label.lt.x,i=this._label.lt.y;let r=jt.calculatorFontWidthHeight(n,this._label.fontSize);const s=o+r.width,a=i+r.height;this._label.rt.x=s,this._label.rt.y=i,this._label.lb.x=o,this._label.lb.y=a,this._label.rb.x=s,this._label.rb.y=a,this._label.text=n}}class Xt extends k{constructor(t){super(t),this.handler=new Yt(t)}active(){this.editor.addEventHandler(this.handler)}deActive(){this.editor.removeEventHandler(this.handler)}}class qt{constructor(){}static Create(t){switch(t){case st:return new Ot;case at:return new Ut;case lt:return new At;case dt:return new Kt;case ct:return new Bt;case ht:return new Zt;default:return new ut}}}class Gt{constructor(t){this.editor=t,this.commandManager=new Q;const e=t.historyManager;this.createLine=e=>{t.page.newControl=this.#p(e,new Ot),this.commandManager.execute(new N(t)),t.render()},this.createRect=e=>{t.page.newControl=this.#p(e,new Ut),this.commandManager.execute(new Z(t)),t.render()},this.createTriangle=e=>{t.page.newControl=this.#p(e,new At),this.commandManager.execute(new kt(t)),t.render()},this.createCircle=e=>{t.page.newControl=this.#p(e,new Kt),this.commandManager.execute(new Et(t)),t.render()},this.createImage=()=>{this.#u((t=>{this.commandManager.execute(new Ht(this.editor,t))}))},this.createLabel=e=>{t.page.newControl=this.#p(e,new Zt),this.commandManager.execute(new $t(this.editor)),t.render()},this.editeLabel=()=>{this.commandManager.execute(new Xt(this.editor)),this.editor.page.selectRender=null,this.editor.page.hoverRender=null,t.render()},this.removeControl=()=>{const n=t.page?.selectRender?.control;if(!n)return;ft.getInstance().clear(),e.startUndo(new F(`undo remove ${n.type} control`,(()=>t.page.addControl(n)))),t.page.removeControl(n),e.endUndo(new F(`redo remove ${n.type} control`,(()=>t.page.removeControl(n))))},this.copyControl=()=>{t.page.copyControl=t.page?.selectRender?.control},this.pasteControl=()=>{const n=t.page?.copyControl;if(!n)return;const o=qt.Create(n.type);o.clone(n),o.move({x:30,y:20}),o.updateSelectPosition(),e.startUndo(new F(`undo paste ${n.type} control`,(()=>t.page.removeControl(o)))),t.page.addControl(o),e.endUndo(new F(`redo paste ${n.type} control`,(()=>t.page.addControl(o)))),t.page.copyControl=o},this.frontControl=()=>{const n=t.page?.selectRender?.control;if(!n)return;let o=this.#g(n);if(o<=0)return;const i=()=>{this.#y(o-1,o),t.render()};e.startUndo(new F(`undo front ${n.type} control`,(()=>i()))),i(),e.endUndo(new F(`redo front ${n.type} control`,(()=>i())))},this.veryFrontControl=()=>{const n=t.page?.selectRender?.control;if(!n)return;let o=this.#g(n);if(o<=0)return;const i=t.page.controls,r=()=>{const[e]=i.splice(o,1);i.splice(0,0,e),t.render()};e.startUndo(new F(`undo very front ${n.type} control`,(()=>(()=>{const[e]=i.splice(0,1);i.splice(o,0,e),t.render()})()))),r(),e.endUndo(new F(`redo very front ${n.type} control`,(()=>r())))},this.backControl=()=>{const n=t.page?.selectRender?.control;if(!n)return;const o=t.page.controls;let i=this.#g(n);if(-1===i||i===o.length-1)return;const r=()=>{this.#y(i,i+1),t.render()};e.startUndo(new F(`undo back ${n.type} control`,(()=>r()))),r(),e.endUndo(new F(`redo back ${n.type} control`,(()=>r())))},this.veryBackControl=()=>{const n=t.page?.selectRender?.control;if(!n)return;const o=t.page.controls;let i=this.#g(n);if(-1===i||i===o.length-1)return;const r=()=>{const[e]=o.splice(i,1);t.page.addControl(e),t.render()};e.startUndo(new F(`undo very back ${n.type} control`,(()=>(()=>{const[t]=o.splice(o.length-1,1);o.splice(i,0,t)})()))),r(),e.endUndo(new F(`redo very back ${n.type} control`,(()=>r())))},this.capture=()=>{this.editor.capture()},this.undo=()=>{e.undo()},this.redo=()=>{e.redo()},this.clear=()=>{t.removeForegroundRender(),this.commandManager.execute(new _t(t)),t.render()},this.commandManager.execute(new _t(t))}#y(t,e){const n=this.editor.page.controls;[n[t],n[e]]=[n[e],n[t]]}#g(t){const e=this.editor.page.controls;let n=-1;return e.some(((e,o)=>{if(e===t)return n=o,!0})),n}#p(t,e){return void 0!==t&&e.setPosition(t),e}#u(t){const e=document.createElement("input");e.type="file",e.accept="image/*",e.style.display="none",e.addEventListener("change",(e=>{const n=new FileReader;n.onload=function(e){const n=new Image;n.onload=function(){t(n)},n.src=e.target.result},n.readAsDataURL(e.target.files[0])})),e.click()}}class Jt extends k{constructor(t,e){super(),this.undo=t,this.redo=e}active(){this.undo()}deActive(){this.redo()}}class Vt{constructor(t){this.editor=t,this.undoQue=[],this.redoQue=[],this.undoAction=null}undo(){if(0===this.undoQue.length)return;const t=this.undoQue.pop();t.active(),this.editor.render(),this.redoQue.push(t)}redo(){if(0===this.redoQue.length)return;const t=this.redoQue.pop();t.deActive(),this.editor.render(),this.undoQue.push(t)}startUndo(t){this.undoAction=t}endUndo(t){const e=this.undoAction,n=new Jt((()=>e.run()),(()=>t.run()));this.undoQue.push(n),this.redoQue=[],this.undoAction=null}}class te{constructor(t){this.#m(),this._editor=t,this._coordinate=t.page.coordinate,jt.setEditor(t)}updateLabel(t){this._label=t,this._input.value=t.text,this.#b()}#m(){const t=document.getElementById("text-editor");t?this._input=t:(this._input=document.createElement("input"),this._input.id="text-editor",this._input.className="hidden absolute outline-0 pl-1 bg-transparent focus:border-transparent",this._input.addEventListener("keydown",(t=>{this.update()})),document.body.appendChild(this._input))}#b(){const t=this._input.getBoundingClientRect();let e=this.getSize(this._coordinate.dpr).width+jt.getWhiteSpace(),n=t.x+e;const o=this._editor.maxPosition,i=n-o.x;i>0&&(e-=i);const r=t.y+t.height-o.y;if(r>0){const t=Number(this._input.style.top.slice(0,-2));this._input.style.top=t-r+"px"}this._input.style.width=e+"px"}getSize(t){let e=this._label.fontSize;return t&&(e*=t),jt.calculatorFontWidthHeight(this._input.value,e)}show(t){const e=this._input,n=this._editor.minPosition,o=Math.max(n.x,t.x),i=Math.max(n.y,t.y);e.style.top=i+window.scrollY+"px",e.style.left=o+window.scrollX+"px",e.style.fontSize=this._label.fontSize*this._coordinate.dpr+"px",e.classList.remove("hidden"),this._editor.enabledShortcut=!1,this.update(),this.focus()}focus(){this._input.focus()}hide(){this._editor.enabledShortcut=!0,this._input.classList.add("hidden")}update(){this.#b()}get val(){return this._input.value}get width(){return Math.round(this._input.style.width.slice(0,-2))}}class ee extends F{constructor(t,e){const n=e.lineColor;super(t,(()=>{e.lineColor=n}))}}class ne extends F{constructor(t,e){const n=e.fillColor;super(t,(()=>{e.fillColor=n}))}}class oe extends F{constructor(t,e){const n=e.lineStyle;super(t,(()=>{e.lineStyle=n}))}}class ie extends F{constructor(t,e){const n=e.lineWidth;super(t,(()=>{e.lineWidth=n}))}}class re extends F{constructor(t,e){const n=e.fontColor;super(t,(()=>{e.fontColor=n}))}}class se{static makeLineIconConfig(){return{viewBox:"0 0 512.000000 512.000000",transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",paths:[{d:"M4565 5106 c-84 -21 -147 -57 -211 -121 -122 -122 -164 -297 -108 -460 l16 -48 -1810 -1809 -1809 -1810 -48 16 c-162 56 -338 14 -460 -109 -178 -177 -178 -453 0 -630 137 -137 340 -172 513 -87 199 97 298 337 226 547 l-16 48 1810 1809 1809 1810 48 -16 c210 -72 444 24 544 222 88 175 55 378 -84 518 -112 113 -269 158 -420 120z m175 -306 c45 -23 80 -80 80 -130 0 -76 -74 -150 -151 -150 -46 0 -108 39 -130 82 -37 72 -14 151 57 194 48 29 92 30 144 4z m-4220 -4220 c45 -23 80 -80 80 -130 0 -76 -74 -150 -151 -150 -46 0 -108 39 -130 82 -37 72 -14 151 57 194 48 29 92 30 144 4z"}]}}static makeRectIconConfig(){return{viewBox:"0 0 512.000000 512.000000",transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",paths:[{d:"M1210 5113 c-309 -33 -592 -171 -815 -397 -199 -201 -313 -414 -372 -696 -17 -79 -18 -176 -18 -1460 0 -1284 1 -1381 18 -1460 60 -283 174 -496 372 -696 201 -203 420 -321 705 -381 79 -17 176 -18 1460 -18 1536 0 1434 -4 1652 71 197 68 346 162 504 319 202 199 321 420 381 705 17 79 18 176 18 1460 0 1525 4 1424 -66 1636 -66 203 -166 361 -329 524 -198 198 -396 307 -675 373 -89 21 -103 21 -1445 23 -745 0 -1371 -1 -1390 -3z m2800 -320 c209 -59 366 -148 501 -282 136 -137 228 -300 283 -506 21 -80 21 -82 21 -1445 0 -1363 0 -1365 -21 -1445 -55 -206 -147 -369 -283 -506 -137 -136 -300 -228 -506 -283 -80 -21 -82 -21 -1445 -21 -1363 0 -1365 0 -1445 21 -206 55 -369 147 -506 283 -134 135 -223 292 -282 501 -22 75 -22 80 -25 1395 -2 923 0 1346 8 1405 32 247 174 504 365 662 141 118 347 212 515 236 38 6 611 9 1405 8 1337 -1 1340 -1 1415 -23z"}]}}static makeTriangleIconConfig(){return{viewBox:"0 0 512.000000 512.000000",transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",paths:[{d:"M2395 4831 c-123 -36 -191 -77 -280 -167 -66 -67 28 91 -1105 -1863 -615 -1061 -962 -1669 -978 -1715 -22 -60 -26 -89 -26 -191 0 -109 3 -128 30 -205 72 -205 230 -350 444 -407 61 -17 188 -18 2080 -18 1660 0 2025 2 2070 14 30 7 93 31 140 53 146 70 268 210 320 368 57 173 32 358 -71 525 -20 33 -461 794 -979 1690 -519 897 -957 1650 -974 1675 -75 111 -218 209 -352 244 -83 22 -241 20 -319 -3z m327 -224 c62 -28 139 -93 173 -147 44 -70 1930 -3337 1962 -3397 40 -78 49 -138 36 -230 -26 -181 -164 -317 -348 -343 -44 -6 -790 -10 -2031 -10 -1799 0 -1964 1 -2010 17 -211 71 -330 294 -266 500 12 37 373 673 987 1738 533 924 983 1703 1002 1731 31 47 97 105 153 134 92 48 245 52 342 7z"}]}}static makeCircleIconConfig(){return{viewBox:"0 0 512.000000 512.000000",transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",paths:[{d:"M2325 5109 c-1081 -101 -1981 -870 -2245 -1919 -265 -1054 156 -2155 1055 -2757 860 -576 1990 -576 2850 0 392 262 723 653 910 1076 542 1222 72 2636 -1092 3290 -432 243 -975 357 -1478 310z m565 -294 c750 -113 1383 -575 1715 -1250 158 -321 229 -634 229 -1005 0 -371 -71 -683 -229 -1005 -332 -677 -963 -1135 -1725 -1252 -158 -24 -482 -24 -640 0 -938 144 -1672 810 -1894 1718 -46 190 -60 317 -60 539 0 371 71 682 229 1005 355 725 1047 1193 1875 1269 89 8 397 -4 500 -19z"}]}}static makeImageIconConfig(){return{viewBox:"0 0 512.000000 512.000000",style:"shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd",paths:[{d:"M 52.5,-0.5 C 187.833,-0.5 323.167,-0.5 458.5,-0.5C 487.167,6.16667 504.833,23.8333 511.5,52.5C 511.5,187.833 511.5,323.167 511.5,458.5C 504.833,487.167 487.167,504.833 458.5,511.5C 323.167,511.5 187.833,511.5 52.5,511.5C 23.8333,504.833 6.16667,487.167 -0.5,458.5C -0.5,323.167 -0.5,187.833 -0.5,52.5C 6.16667,23.8333 23.8333,6.16667 52.5,-0.5 Z M 63.5,31.5 C 191.5,31.3333 319.5,31.5 447.5,32C 466.667,33.8333 477.167,44.3333 479,63.5C 479.667,133.167 479.667,202.833 479,272.5C 447.32,239.987 415.487,207.654 383.5,175.5C 330.68,228.487 278.013,281.654 225.5,335C 224.833,335.667 224.167,335.667 223.5,335C 202.32,313.653 180.986,292.486 159.5,271.5C 116.551,309.613 74.0511,348.28 32,387.5C 31.3333,279.5 31.3333,171.5 32,63.5C 34.0109,44.3232 44.5109,33.6566 63.5,31.5 Z M 120.5,96.5 C 146.977,95.4761 159.477,108.143 158,134.5C 152.207,152.822 139.707,160.655 120.5,158C 102.178,152.207 94.3446,139.707 97,120.5C 100.349,107.985 108.182,99.9853 120.5,96.5 Z M 382.5,224.5 C 415.083,255.582 447.249,287.248 479,319.5C 479.963,364.528 479.63,409.528 478,454.5C 474.833,467 467,474.833 454.5,478C 424.864,479.609 395.197,479.943 365.5,479C 326.167,439.333 286.833,399.667 247.5,360C 292.701,314.965 337.701,269.799 382.5,224.5 Z M 158.5,319.5 C 211.965,372.465 265.299,425.632 318.5,479C 233.5,479.667 148.5,479.667 63.5,479C 47.8185,477.589 37.6519,469.423 33,454.5C 31.6471,447.208 31.3138,439.875 32,432.5C 74.3611,394.968 116.528,357.301 158.5,319.5 Z",style:"opacity:0.986"},{d:"M 116.5,63.5 C 151.632,60.4685 175.798,75.1352 189,107.5C 196.639,138.355 187.805,163.188 162.5,182C 137.759,195.223 113.426,194.557 89.5,180C 67.6664,162.172 59.4997,139.339 65,111.5C 72.7458,85.2501 89.9124,69.2501 116.5,63.5 Z M 120.5,96.5 C 108.182,99.9853 100.349,107.985 97,120.5C 94.3446,139.707 102.178,152.207 120.5,158C 139.707,160.655 152.207,152.822 158,134.5C 159.477,108.143 146.977,95.4761 120.5,96.5 Z",style:"opacity:0.965"}]}}static makeLabelIconConfig(){return{viewBox:"0 0 512.000000 512.000000",transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",paths:[{d:"M0 4670 l0 -450 150 0 150 0 0 -1660 0 -1660 -150 0 -150 0 0 -450 0 -450 450 0 450 0 0 150 0 150 1660 0 1660 0 0 -150 0 -150 450 0 450 0 0 450 0 450 -150 0 -150 0 0 1660 0 1660 150 0 150 0 0 450 0 450 -450 0 -450 0 0 -150 0 -150 -1660 0 -1660 0 0 150 0 150 -450 0 -450 0 0 -450z m4220 -300 l0 -150 150 0 150 0 0 -1660 0 -1660 -150 0 -150 0 0 -150 0 -150 -1660 0 -1660 0 0 150 0 150 -150 0 -150 0 0 1660 0 1660 150 0 150 0 0 150 0 150 1660 0 1660 0 0 -150z"},{d:"M1200 3620 l0 -450 150 0 150 0 0 150 0 150 380 0 380 0 0 -1060 0 -1060 -225 0 -225 0 0 -150 0 -150 750 0 750 0 0 150 0 150 -225 0 -225 0 0 1060 0 1060 380 0 380 0 0 -150 0 -150 150 0 150 0 0 450 0 450 -1360 0 -1360 0 0 -450z"}]}}static makeLineWidthIconConfig(){return{viewBox:"0 0 512.000000 512.000000",transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",paths:[{d:"M784 3981 c-117 -53 -117 -224 0 -280 42 -21 43 -21 1776 -21 1733 0 1734 0 1776 21 118 56 118 222 0 278 -42 21 -43 21 -1777 21 -1669 0 -1736 -1 -1775 -19z"},{d:"M765 3391 c-72 -32 -125 -113 -125 -191 0 -78 53 -159 125 -191 38 -18 119 -19 1795 -19 1676 0 1757 1 1795 19 72 32 125 113 125 191 0 78 -53 159 -125 191 -38 18 -119 19 -1795 19 -1676 0 -1757 -1 -1795 -19z"},{d:"M792 2659 c-58 -11 -137 -56 -174 -98 -141 -161 -93 -408 98 -502 l49 -24 1780 -3 c1525 -2 1786 0 1822 12 183 62 269 268 184 440 -36 74 -82 118 -161 155 l-55 26 -1750 1 c-962 1 -1769 -2 -1793 -7z"},{d:"M780 1699 c-106 -18 -227 -98 -286 -191 -39 -61 -64 -151 -64 -228 0 -209 152 -387 360 -420 91 -14 3451 -14 3540 1 209 33 360 209 360 419 0 210 -151 386 -360 419 -82 14 -3469 13 -3550 0z"}]}}static makeLineSolidIconConfig(){return{viewBox:"0 0 512.000000 512.000000",style:"shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd",paths:[{d:"M 511.5,248.5 C 511.5,253.167 511.5,257.833 511.5,262.5C 509.018,268.48 504.685,272.647 498.5,275C 336.5,275.667 174.5,275.667 12.5,275C 6.31536,272.647 1.98203,268.48 -0.5,262.5C -0.5,257.833 -0.5,253.167 -0.5,248.5C 1.98203,242.52 6.31536,238.353 12.5,236C 174.5,235.333 336.5,235.333 498.5,236C 504.685,238.353 509.018,242.52 511.5,248.5 Z",style:"opacity:0.997"}]}}static makeLineDashIconConfig(){return{viewBox:"0 0 100.000000 100.000000",transform:"translate(0.000000,100.000000) scale(0.100000,-0.100000)",paths:[{d:"M24 515 c-4 -8 -4 -22 0 -30 5 -13 27 -15 143 -13 l138 3 0 25 0 25 -138 3 c-116 2 -138 0 -143 -13z"},{d:"M360 515 c-10 -12 -10 -18 0 -30 10 -12 39 -15 140 -15 101 0 130 3 140 15 10 12 10 18 0 30 -10 12 -39 15 -140 15 -101 0 -130 -3 -140 -15z"},{d:"M694 515 c-4 -8 -4 -22 0 -30 5 -13 27 -15 143 -13 l138 3 0 25 0 25 -138 3 c-116 2 -138 0 -143 -13z"}]}}static makeLineStyleIconConfig(){return{viewBox:"0 0 96.000000 96.000000",transform:"translate(0.000000,96.000000) scale(0.100000,-0.100000)",paths:[{d:"M120 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M220 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M320 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M420 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M520 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M620 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M720 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M820 780 c0 -16 7 -20 30 -20 23 0 30 4 30 20 0 16 -7 20 -30 20 -23 0 -30 -4 -30 -20z"},{d:"M120 630 l0 -30 110 0 110 0 0 30 0 30 -110 0 -110 0 0 -30z"},{d:"M380 630 l0 -30 120 0 120 0 0 30 0 30 -120 0 -120 0 0 -30z"},{d:"M660 630 l0 -30 110 0 110 0 0 30 0 30 -110 0 -110 0 0 -30z"},{d:"M120 460 l0 -40 180 0 180 0 0 40 0 40 -180 0 -180 0 0 -40z"},{d:"M520 460 l0 -40 180 0 180 0 0 40 0 40 -180 0 -180 0 0 -40z"},{d:"M120 260 l0 -60 380 0 380 0 0 60 0 60 -380 0 -380 0 0 -60z"}]}}static makeLineColorIconConfig(){return{viewBox:"0 0 96.000000 96.000000",style:"shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd",paths:[{d:"M 61.5,3.5 C 63.8568,3.33669 66.1902,3.50335 68.5,4C 77.3333,12.8333 86.1667,21.6667 95,30.5C 95.6667,32.8333 95.6667,35.1667 95,37.5C 79.5291,53.9715 63.6957,70.1381 47.5,86C 43.679,88.1407 40.0124,87.974 36.5,85.5C 31.8729,87.4313 27.2062,89.2647 22.5,91C 46.1643,91.5 69.831,91.6666 93.5,91.5C 93.5,92.8333 93.5,94.1667 93.5,95.5C 64.1648,95.6666 34.8314,95.5 5.5,95C 4.13003,93.5587 3.13003,91.892 2.5,90C 6.25999,80.8901 9.92665,71.7234 13.5,62.5C 11.026,58.9876 10.8593,55.321 13,51.5C 29.0617,35.271 45.2283,19.271 61.5,3.5 Z M 63.5,8.5 C 64.552,8.35055 65.552,8.51722 66.5,9C 74.8768,17.042 82.8768,25.3754 90.5,34C 80.3759,45.1253 69.8759,55.9586 59,66.5C 49.4729,58.3063 40.6396,49.4729 32.5,40C 43.0355,29.6317 53.3688,19.1317 63.5,8.5 Z M 27.5,44.5 C 36.7456,52.2412 45.5789,60.5745 54,69.5C 54.1667,72 53,73.1667 50.5,73C 42.3333,64.8333 34.1667,56.6667 26,48.5C 25.7003,46.9343 26.2003,45.601 27.5,44.5 Z M 20.5,51.5 C 29.7456,59.2412 38.5789,67.5745 47,76.5C 46.8047,78.745 45.6381,80.5784 43.5,82C 42.5,82.6667 41.5,82.6667 40.5,82C 32.6667,74.1667 24.8333,66.3333 17,58.5C 16.3333,57.5 16.3333,56.5 17,55.5C 18.3756,54.2949 19.5423,52.9616 20.5,51.5 Z M 17.5,66.5 C 22.6313,71.1302 27.6313,75.9635 32.5,81C 25.1972,84.5481 17.6972,87.7148 10,90.5C 9.5,90.1667 9,89.8333 8.5,89.5C 11.704,81.8835 14.704,74.2169 17.5,66.5 Z",style:"opacity:0.8"}]}}static makeFillColorIconConfig(){return{viewBox:"0 0 512.000000 512.000000",style:"shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd",paths:[{d:"M 123.5,38.5 C 130.688,37.4295 137.021,39.2628 142.5,44C 229.944,105.111 317.111,166.611 404,228.5C 411.686,238.582 414.353,249.915 412,262.5C 410.47,267.892 408.137,272.892 405,277.5C 363.333,336.833 321.667,396.167 280,455.5C 260.563,474.454 238.729,477.621 214.5,465C 157.833,425.333 101.167,385.667 44.5,346C 25.0018,327.517 20.8351,306.017 32,281.5C 74.464,220.071 117.297,158.904 160.5,98C 148.444,88.9443 136.11,80.2776 123.5,72C 110.946,63.8981 108.946,53.8981 117.5,42C 119.432,40.5415 121.432,39.3748 123.5,38.5 Z M 187.5,116.5 C 245.804,157.324 304.138,198.157 362.5,239C 263.47,256.671 164.47,274.004 65.5,291C 106.546,233.067 147.212,174.9 187.5,116.5 Z",style:"opacity:0.982"},{d:"M 420.5,305.5 C 426.675,304.643 432.342,305.81 437.5,309C 454.276,328.701 468.443,350.201 480,373.5C 489.694,398.556 485.194,420.723 466.5,440C 441.546,459.441 415.879,460.441 389.5,443C 368.117,424.176 362.283,401.343 372,374.5C 382.265,352.917 394.932,332.917 410,314.5C 413.103,310.886 416.603,307.886 420.5,305.5 Z",style:"opacity:0.981"}]}}static makeFontSizeIconConfig(){return{width:"16",height:"16",viewBox:"0 0 512.000000 512.000000",style:"shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd",paths:[{d:"M 36.5,7.5 C 154.167,7.33333 271.834,7.5 389.5,8C 403.822,10.99 412.988,19.49 417,33.5C 418.582,51.4613 418.916,69.4613 418,87.5C 415.082,107.085 403.748,117.751 384,119.5C 366.867,118.362 355.534,109.695 350,93.5C 348.869,87.888 348.369,82.2213 348.5,76.5C 317.165,76.3334 285.832,76.5 254.5,77C 251.427,77.7386 249.26,79.5719 248,82.5C 247.333,197.833 247.333,313.167 248,428.5C 249.26,431.428 251.427,433.261 254.5,434C 265.833,434.333 277.167,434.667 288.5,435C 308.463,441.069 317.297,454.569 315,475.5C 311.705,488.796 303.538,497.63 290.5,502C 264.714,503.149 238.881,503.649 213,503.5C 186.794,503.644 160.628,503.144 134.5,502C 118.934,496.554 110.6,485.554 109.5,469C 111.05,451.224 120.383,439.89 137.5,435C 148.833,434.667 160.167,434.333 171.5,434C 175,433.167 177.167,431 178,427.5C 178.667,312.833 178.667,198.167 178,83.5C 177.167,80 175,77.8333 171.5,77C 139.835,76.5 108.168,76.3334 76.5,76.5C 77.7393,107.431 63.0727,121.265 32.5,118C 18.6218,113.411 10.4552,103.911 8,89.5C 7.06375,70.123 7.39709,50.7897 9,31.5C 14.0563,18.5996 23.223,10.5996 36.5,7.5 Z",style:"opacity:0.986"},{d:"M 309.5,272.5 C 370.168,272.333 430.834,272.5 491.5,273C 497.74,274.908 501.573,279.075 503,285.5C 503.667,296.833 503.667,308.167 503,319.5C 498.257,331.284 489.757,335.117 477.5,331C 469.39,325.258 466.39,317.425 468.5,307.5C 451.833,307.5 435.167,307.5 418.5,307.5C 418.5,361.167 418.5,414.833 418.5,468.5C 425.508,468.334 432.508,468.5 439.5,469C 449.388,472.319 453.555,479.152 452,489.5C 450.167,496.667 445.667,501.167 438.5,503C 413.167,503.667 387.833,503.667 362.5,503C 351.1,499.035 346.934,491.201 350,479.5C 352.256,474.243 356.09,470.743 361.5,469C 368.826,468.5 376.159,468.334 383.5,468.5C 383.5,414.833 383.5,361.167 383.5,307.5C 366.5,307.5 349.5,307.5 332.5,307.5C 334.839,325.324 327.172,333.49 309.5,332C 302.979,329.794 299.146,325.294 298,318.5C 297.333,307.5 297.333,296.5 298,285.5C 299.617,279.058 303.45,274.725 309.5,272.5 Z",style:"opacity:0.973"}]}}static makeFontColorIconConfig(){return{width:"18",height:"18",viewBox:"0 0 512.000000 512.000000",style:"shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd",paths:[{d:"M 269.5,-0.5 C 310.833,-0.5 352.167,-0.5 393.5,-0.5C 432.294,117.883 471.294,236.217 510.5,354.5C 478.507,355.5 446.507,355.833 414.5,355.5C 408.815,332.76 402.815,310.093 396.5,287.5C 362.507,286.5 328.507,286.167 294.5,286.5C 294.667,267.497 294.5,248.497 294,229.5C 291.385,207.763 279.551,193.93 258.5,188C 241.538,186.756 224.538,186.089 207.5,186C 228.269,123.859 248.936,61.6918 269.5,-0.5 Z M 326.5,82.5 C 330.767,82.203 334.934,82.5363 339,83.5C 352.677,123.696 365.843,164.03 378.5,204.5C 347.833,204.5 317.167,204.5 286.5,204.5C 299.628,163.783 312.961,123.116 326.5,82.5 Z",style:"opacity:0.986"},{d:"M 263.5,511.5 C 251.5,511.5 239.5,511.5 227.5,511.5C 214.803,510.329 201.969,508.995 189,507.5C 159.667,508.833 130.333,508.833 101,507.5C 88.0243,508.925 75.191,510.259 62.5,511.5C 50.5,511.5 38.5,511.5 26.5,511.5C 5.26041,505.702 -2.57293,492.035 3,470.5C 6.01241,465.8 9.01241,461.134 12,456.5C 14.4453,443.272 16.1119,429.938 17,416.5C 18.1479,393.507 19.1479,370.507 20,347.5C 20.9343,344.864 21.7676,342.197 22.5,339.5C 21.5652,336.529 20.7319,333.529 20,330.5C 19.0392,300.127 19.3726,269.793 21,239.5C 26.8115,222.51 38.6448,213.01 56.5,211C 69.8292,210.5 83.1625,210.333 96.5,210.5C 97.9454,195.813 97.7788,181.146 96,166.5C 92.6215,153.412 88.9548,140.412 85,127.5C 83.1843,94.014 98.0176,71.8473 129.5,61C 155.012,55.6147 176.179,62.7814 193,82.5C 204.846,99.2381 208.179,117.571 203,137.5C 195.262,153.424 191.762,170.257 192.5,188C 192.723,195.51 193.056,203.01 193.5,210.5C 206.837,210.333 220.171,210.5 233.5,211C 251.916,212.953 263.749,222.786 269,240.5C 270.626,269.793 270.959,299.126 270,328.5C 269.595,332.266 268.761,335.933 267.5,339.5C 268.435,342.471 269.268,345.471 270,348.5C 270.624,371.85 271.624,395.183 273,418.5C 273.943,431.596 275.61,444.596 278,457.5C 280.251,461.425 282.917,465.092 286,468.5C 293.262,490.645 285.762,504.978 263.5,511.5 Z M 47.5,354.5 C 112.5,354.5 177.5,354.5 242.5,354.5C 242.239,386.955 244.073,419.288 248,451.5C 248.899,460.098 250.899,468.431 254,476.5C 255.5,479.333 257.667,481.5 260.5,483C 256.587,484.052 252.587,484.552 248.5,484.5C 232.435,483.829 216.435,482.495 200.5,480.5C 195.395,459.141 190.229,437.808 185,416.5C 181.879,437.758 179.379,459.092 177.5,480.5C 153.5,480.5 129.5,480.5 105.5,480.5C 101.018,467.554 95.8514,454.887 90,442.5C 89.5001,455.496 89.3334,468.496 89.5,481.5C 73.5045,482.5 57.5045,483.5 41.5,484.5C 37.4128,484.552 33.4128,484.052 29.5,483C 33.3022,480.913 35.8022,477.746 37,473.5C 42.2919,451.833 45.2919,429.833 46,407.5C 47.0264,389.847 47.5264,372.181 47.5,354.5 Z",style:"opacity:0.984"}]}}static makeUndoIconConfig(){return{viewBox:"0 0 96.000000 96.000000",transform:"translate(0.000000,96.000000) scale(0.100000,-0.100000)",paths:[{d:"M80 502 l0 -182 182 0 182 0 -72 73 c-80 81 -80 78 -2 117 139 71 329 9 404 -132 33 -61 33 -61 99 -34 l28 11 -26 52 c-32 64 -105 142 -165 176 -136 79 -330 70 -447 -19 l-35 -27 -74 74 -74 73 0 -182z"}]}}static makeRedoIconConfig(){return{viewBox:"0 0 96.000000 96.000000",transform:"translate(0.000000,96.000000) scale(0.100000,-0.100000)",paths:[{d:"M803 609 l-71 -72 -35 27 c-86 65 -224 91 -337 62 -122 -31 -220 -110 -275 -219 -27 -54 -25 -58 25 -70 22 -5 28 -1 49 39 34 63 96 123 161 153 74 35 201 37 270 5 95 -46 95 -42 5 -133 l-80 -81 183 0 182 0 0 180 c0 99 -1 180 -3 180 -1 0 -34 -32 -74 -71z"}]}}}const ae="hidden pointer-events-auto flex items-center rounded-md border border-slate-300 shadow-sm bg-background bg-slate-100 text-foreground absolute gap-0.5 p-1";class le{constructor(t){this._editor=t,this._tools=t.tools,this._toolbarWrap=document.createElement("div"),this._toolbarWrap.className="flex w-52 m-2"}createToolbar(t){const e=document.createElement("div");e.id="toolbar",e.className="pointer-events-auto flex items-center rounded-md border border-slate-200 shadow-sm bg-background text-foreground relative gap-0.5 p-0.5 p-1 pl-3 pr-1";const n=this.#x(se.makeLineIconConfig(),"Q",(()=>{this._tools.createLine()})),o=this.#x(se.makeRectIconConfig(),"W",(()=>{this._tools.createRect()})),i=this.#x(se.makeTriangleIconConfig(),"E",(()=>{this._tools.createTriangle()})),r=this.#x(se.makeCircleIconConfig(),"R",(()=>{this._tools.createCircle()})),s=this.#x(se.makeImageIconConfig(),"T",(()=>{this._tools.createImage()})),a=this.#x(se.makeLabelIconConfig(),"A",(()=>{this._tools.createLabel()}));e.appendChild(n),e.appendChild(o),e.appendChild(i),e.appendChild(r),e.appendChild(s),e.appendChild(a);const l=document.createElement("div");l.className="shrink-0 bg-border h-full w-[1px] mr-2 dark:bg-gray-300",l.role="none",e.appendChild(l);const d=this.#x(se.makeUndoIconConfig(),"Z",(()=>{this._tools.undo()})),c=this.#x(se.makeRedoIconConfig(),"Y",(()=>{this._tools.redo()}));e.appendChild(d),e.appendChild(c),this._toolbarWrap.appendChild(e),t.appendChild(this.#w()),t.appendChild(this.#f()),t.appendChild(this._toolbarWrap)}#f(){const t=document.createElement("div");t.id="font-option",t.className=ae,t.classList.add("pl-2");const e=document.createElement("p");e.className="w-20 h-8 inline-flex items-center justify-center rounded hover:bg-slate-200";const n=this.#C(se.makeFontSizeIconConfig());n.classList.add("mr-2");const o=document.createElement("input");o.id="font-size",o.type="number",o.className="w-10 h-5 text-right",o.addEventListener("input",(t=>{let e=t.target.value?parseInt(t.target.value,10):1;e<=0&&(e=1,o.value=1);const n=this._editor.page.selectRender.control;n.fontSize=e;const i=jt.calculatorFontWidthHeight(n.text,n.fontSize),r=n.lt,s=n.rb;s.x=r.x+i.width,s.y=r.y+i.height,n.lb.y=r.y+i.height,n.rt.x=r.x+i.width,n.updatePosition(),this._editor.render()})),e.appendChild(n),e.appendChild(o);const i=this.#v("font-color",{x:wt,y:gt},(t=>{const e=this._editor.page.selectRender.control;this._editor.historyManager.startUndo(new re("undo font color",e)),e.fontColor=t,this._editor.historyManager.endUndo(new re("redo font color",e))})),r=this.#x(se.makeFontColorIconConfig(),"",(()=>{ft.getInstance().showFontColorToolbar()}));return t.appendChild(e),t.appendChild(r),t.appendChild(i),t}#w(){const t=document.createElement("div");t.id="line-option",t.className=ae;const e=this.#_(),n=this.#x(se.makeLineWidthIconConfig(),"",(()=>{ft.getInstance().showLineWidthToolbar()})),o=this.#P(),i=this.#x(se.makeLineStyleIconConfig(),"",(()=>{ft.getInstance().showLineStyleToolbar()})),r=this.#v("line-color",{x:bt,y:gt},(t=>{const e=this._editor.page.selectRender.control;this._editor.historyManager.startUndo(new ee("undo line color",e)),e.lineColor=t,this._editor.historyManager.endUndo(new ee("redo line color",e))}));r.classList.add("bg-slate-200");const s=this.#x(se.makeLineColorIconConfig(),"",(()=>{ft.getInstance().showLineColorToolbar()})),a=this.#v("fill-color",{x:bt,y:gt},(t=>{const e=this._editor.page.selectRender.control;this._editor.historyManager.startUndo(new ne("undo fill color",e)),this._editor.page.selectRender.control.fillColor=t,this._editor.historyManager.endUndo(new ne("redo fill color",e))}));a.classList.add("bg-slate-300");const l=this.#x(se.makeFillColorIconConfig(),"",(()=>{ft.getInstance().showFillColorToolbar()}));return l.id="fill-color-btn",t.appendChild(n),t.appendChild(i),t.appendChild(s),t.appendChild(l),t.appendChild(e),t.appendChild(o),t.appendChild(r),t.appendChild(a),t}#v(t,e,n){const o=document.createElement("div");o.id=t,o.style.left=e.x+"px",o.style.top=e.y+"px",o.className=ae;return["rgb(255,255,255)","rgb(0,0,0)","rgb(113,113,113)","rgb(216,61,27)","rgb(236,145,38)","rgb(233,186,31)","rgb(28,138,79)","rgb(14,136,224)","rgb(134,57,235)"].forEach((t=>{const e=this.#M(t,(()=>{n(t),this._editor.render()}));o.appendChild(e)})),o}#P(){const t=document.createElement("div");t.id="line-style",t.style.left=mt+"px",t.style.top=gt+"px",t.className=ae;const e=this.#x(se.makeLineSolidIconConfig(),"",(()=>{const t=this._editor.page.selectRender.control;this.#k(t,C),this._editor.render()}));t.appendChild(e);const n=this.#x(se.makeLineDashIconConfig(),"",(()=>{const t=this._editor.page.selectRender.control;this.#k(t,v),this._editor.render()}));return t.appendChild(n),t}#k(t,e){this._editor.historyManager.startUndo(new oe("undo line Style",t)),t.lineStyle=e,this._editor.historyManager.endUndo(new oe("redo line Style",t))}#_(){const t=document.createElement("div");t.id="line-width",t.style.left=yt+"px",t.style.top=gt+"px",t.className=ae;for(let e=1;e<=5;++e){const n=document.createElement("button");n.className="w-8 h-8 ml-1 mr-1 pl-1 pr-1 inline-flex items-center justify-center rounded hover:bg-slate-200",n.addEventListener("click",(()=>{const t=this._editor.page.selectRender.control;this._editor.historyManager.startUndo(new ie("undo line width",t)),t.lineWidth=e,this._editor.historyManager.endUndo(new ie("redo line width",t)),this._editor.render()}));const o=document.createElement("span");o.style.height="0px",o.style.width="30px",o.style.borderWidth=e+"px",o.className="border-black",n.appendChild(o),t.appendChild(n)}return t}#M(t,e){const n=document.createElement("div");n.className="relative flex item-center justify-center mr-1 pt-0.5 pb-0.5 rounded-full hover:bg-slate-300";const o=document.createElement("button");return o.className="w-6 h-6 mt-1 mb-1 ml-2 mr-2 inline-flex items-center justify-center rounded-full",o.style.backgroundColor=t,o.addEventListener("click",e),n.appendChild(o),n}#x(t,e,n){const o=document.createElement("div");o.className="relative flex item-center justify-center mr-1";const i=this.#C(t),r=document.createElement("button");if(r.className="w-8 h-8 inline-flex items-center justify-center rounded hover:bg-slate-200",r.addEventListener("click",n),r.appendChild(i),o.appendChild(r),""!==e){i.classList.add("mr-2");const t=document.createElement("div");t.className="w-2 h-3 items-center justify-center absolute right-0 bottom-0 text-[8px] opacity-40",t.textContent=e,o.appendChild(t)}return o}#C(t){const e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");n.style=t.style??"",n.setAttribute("xmlns",e),n.setAttribute("width",t?.width??"20"),n.setAttribute("height",t?.height??"20"),n.setAttribute("viewBox",t.viewBox);const o=document.createElementNS(e,"g");return o.setAttribute("transform",t.transform??""),t.paths.forEach((t=>{const n=document.createElementNS(e,"path");n.setAttribute("d",t.d),n.style=t.style??"",o.appendChild(n)})),n.appendChild(o),n}}class de{constructor(t){this._editor=t,this.#m()}#m(){const t=document.getElementById("menu-root");if(t)return void(this._root=t);this._root=document.createElement("div"),this._root.id="menu-root",this._root.className="hidden absolute";const e=document.createElement("div");e.id="menu",e.className="overflow-hidden rounded-xl border p-1.5 bg-slate-50 w-52 drop-shadow-md",e.appendChild(this.#R("Undo")),e.appendChild(this.#R("Redo")),e.appendChild(this.#z()),e.appendChild(this.#R("Copy")),e.appendChild(this.#R("Paste")),this._root.appendChild(e),document.body.appendChild(this._root)}#R(t,e){const n=document.createElement("div");n.id="undo_item",n.className="relative flex cursor-default select-none items-center rounded-md px-2 py-1.5 text-xs outline-none hover:bg-slate-200";const o=document.createElement("span");return o.textContent=t,o.className="pr-6 flex items-center",n.appendChild(o),n}#z(){const t=document.createElement("div");return t.className="-mx-1.5 my-1.5 h-px bg-border",t}show(t){const e=this._editor.minPosition,n=Math.max(e.x,t.x),o=Math.max(e.y,t.y),i=this._root;i.style.top=o+window.scrollY+"px",i.style.left=n+window.scrollX+"px",this._root.classList.remove("hidden")}hide(){this._root.classList.add("hidden")}}var ce=n(72),he=n.n(ce),pe=n(825),ue=n.n(pe),ge=n(659),ye=n.n(ge),me=n(56),be=n.n(me),xe=n(540),we=n.n(xe),fe=n(113),Ce=n.n(fe),ve=n(907),_e={};_e.styleTagTransform=Ce(),_e.setAttributes=be(),_e.insert=ye().bind(null,"head"),_e.domAPI=ue(),_e.insertStyleElement=we();he()(ve.A,_e);ve.A&&ve.A.locals&&ve.A.locals;class Pe{constructor(t,{width:e,height:n}){const o=document.getElementById(t);o.className="m-5",this.canvas=document.createElement("canvas"),this.canvas.style.border="solid 2px #000";const i=700/e;this.canvas.width=700,this.canvas.height=n*i,this.ctx=this.canvas.getContext("2d"),this.page=new M(this.ctx),this.eventManager=new f(this),this._historyManager=new Vt(this),this._tools=new Gt(this),this._toolbar=new le(this),this._textEditor=new te(this),this._menu=new de(this),this.foregroundRender=null,this._enabledShortcut=!0,this.#m(o)}#m(t){this._toolbar.createToolbar(t),t.appendChild(this.canvas),this.page.render(),this.canvas.addEventListener("dblclick",(t=>{this.eventManager.onDoubleClick(t)})),this.canvas.addEventListener("mousedown",(t=>{this.eventManager.onMouseDown(t)})),this.canvas.addEventListener("mousemove",(t=>{this.eventManager.onMouseMove(t)})),this.canvas.addEventListener("mouseup",(t=>{this.eventManager.onMouseUp(t)})),this.canvas.addEventListener("wheel",(t=>{this.eventManager.onMouseWheel(t)})),this.canvas.addEventListener("contextmenu",(t=>{t.preventDefault()})),document.addEventListener("keydown",(t=>{this.eventManager.onKeyDown(t)})),document.addEventListener("keyup",(t=>{this.eventManager.onKeyUp(t)}))}capture(){this.#E();const t=document.createElement("a");t.href=this.save(),t.download="canvas_image.png",t.click()}save(){this.ctx.save(),this.#E();const t=this.canvas.toDataURL("image/png");return this.ctx.restore(),this.render(),t}#E(){this.page.captureRender()}get enabledShortcut(){return this._enabledShortcut}set enabledShortcut(t){this._enabledShortcut=t}addEventHandler(t){this.eventManager.addHandler(t)}removeEventHandler(t){this.eventManager.removeHandler(t)}addForegroundRender(t){this.foregroundRender=t}removeForegroundRender(){this.foregroundRender=null}startDragHandler(t){ft.getInstance().clear(),this.eventManager.startDragHandler(t)}finishDragHandler(){this.eventManager.finishDragHandler()}clearCommand(){this._tools.clear()}render(){this.page.render(),this.foregroundRender?.render(this.page.painter)}get toolbar(){return this._toolbar}get tools(){return this._tools}get textEditor(){return this._textEditor}get menu(){return this._menu}get historyManager(){return this._historyManager}get width(){return this.canvas.width}get height(){return this.canvas.height}get maxPosition(){const t=this.canvas.getBoundingClientRect();return{x:t.right,y:t.y+t.height}}get minPosition(){const t=this.canvas.getBoundingClientRect(),e=Number(this.canvas.style.borderWidth.slice(0,-2));return{x:t.x+e,y:t.y+e}}}self.KPS=o})();